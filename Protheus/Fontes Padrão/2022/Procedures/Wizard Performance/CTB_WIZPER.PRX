#INCLUDE "PROTHEUS.CH"
#INCLUDE "CTB_WIZPER.CH"

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ aTDN -> Documentacao sobre melhorias de performance disponiveis no portal TDN ³
//³ aTDN[nX,1] (C) := Descricao da Melhoria                                       ³
//³ aTDN[nX,2] (C) := Data da Disponibilizacao                                    ³
//³ aTDN[nX,3] (C) := Link do Portal TDN                                          ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ Parametros para melhoria de Performance                                       ³
//³ (Somente parametro referente a melhoria de performance)                       ³
//³ aSX6 -> Parametro SX6 utilizado para configuracao de performance              ³   
//³ aSX6[nX,1] (C) := Nome do Parametro                                           ³
//³ aSX6[nx,2] (C) := Tipo do Parametro                                           ³
//³ aSX6[nX,3] (C) := Conteudo Sugerido                                           ³
//³ aSX6[nX,4] (C) := Compatibilidade                                             ³
//³ aSX6[nX,5] (C) := Observacoes sobre a alteracao do parametro, mudancas        ³ 
//³                   sistemicas, habilita/desabilita processos e etc.            ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ Informacoes sobre o processo (rotina)                                         ³
//³ aProcesso[nX,1] (C) := Nome do Modulo                                         ³
//³ aProcesso[nX,2] (C) := Nome do Arquivo Fonte                                  ³
//³ aProcesso[nX,3] (C) := Nome completo da rotina                                ³
//³ aProcesso[nX,4] (C) := Data de publicacao no WIZARD                           ³
//³ aProcesso[nX,5] (C) := Codigo sequencial do processo (cCargo)                 ³
//³ aProcesso[nX,6] (A) := Array com o conteudo do Portal TDN sobre a rotina      ³
//³ aProcesso[nX,7] (A) := Array com a configuracao dos parametros SX6 referentes ³ 
//³ aProcesso[nX,8] (C) := Codigo do Processo (Stored Procedure) - CFGX051        ³ 
//³ aProcesso[nX,9] (L) := A rotina utiliza o log de processamento CV8            ³ 
//³ aProcesso[nX,10] (C):= Ultima assinatura da Stored Procedures                 ³ 
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ

Function CTB_WIZPER
Local aSX6    	:= {}
Local aTDN    	:= {}
Local aProcesso := {}

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ CTBA105 - Lancamentos Contabeis                  ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
aAdd(aTDN,{STR0001,"24/01/2014","http://tdn.totvs.com/display/mp/Compartilhamento+de+tabelas+SigaCTB+--+23595"})	//"Reprocessamento por Contas"
aAdd(aTDN,{STR0002,"24/01/2014","http://tdn.totvs.com/pages/viewpage.action?pageId=6068428"})						//"Performance das Rotinas de Contabilização"
aAdd(aTDN,{STR0003,"24/01/2014","http://tdn.totvs.com/pages/viewpage.action?pageId=6068360"})						//"Cache das rotinas de contabilização"
aAdd(aTDN,{STR0004,"24/01/2014","http://tdn.totvs.com/pages/viewpage.action?pageId=6068341"})						//"Contabilização com múltiplos processos"

aAdd(aSX6,{"MV_ATUSAL"	,"C", "N" 		,"", { STR0005	,;		//"Atualiza Saldos Contábeis Básicos durante o lançamento"
									  			STR0006	}})		//"S - para atualização ou N -para não atualizar.        "

aAdd(aSX6,{"MV_SLDCOMP"	,"C", "N" 		,"", {  STR0007	,;		//"Define se os Saldos Compostos serão atualizados no    "	
		                              			STR0008	,;		//"momento da emissão do relatório (S) ou durante o      "
											   	STR0009	}})		//"Reprocessamento (N)                                   "

aAdd(aSX6,{"MV_CTBSER"	,"N", "2" 		,"", {  STR0010	,;		//"Habilita/Desabilita controle de serialização por     "
		                                       	STR0011	,;		//"processos Off-Line x On-Line Contabilidade Gerencial. "
											   	STR0012	,;		//"Conteúdos possíveis:                                  "
											   	STR0013	,;		//"1 - Semaforo/Serialização de processos Habilitada     "
											   	STR0014	,;		//"2 - Semaforo/Serialização de processos Desabilitada   "
											   	STR0015	,;		//"3 - Modo Teste -com alertas ao ligar/desligar semaforo"
											   	"                                                      "		,;
											   	STR0016	,;		//"Processos que podem ser executados em concorrencia    "
											   	STR0017	,;		//"(on-line):                                            "
											   	STR0018	,;		//" -> Contabilizações de Integração On-Line e Off-Line  "
											   	STR0019	,;		//" -> Operações de Lançamentos Manuais                  "
											   	STR0020	,;		//" -> Contabilização TXT                                "
											   	STR0021	}})		//" -> Efetivação de lançamentos.                        "

aAdd(aSX6,{"MV_CTBCACH"	,"C","1"		,"", {	STR0022	,;		//"Indica se as informações das entidades contábeis,     "
                                       			STR0023	,;		//"calendário, moeda e câmbio permanecerão em cache      "
											   	STR0024	,;		//"para otimização de performance.                       "
											   	STR0025	}})		//"0 - Não Habilita e 1-Habilita Cache                   "

aAdd(aSX6,{"MV_NUMLIN"	,"N", "999999"	,"",{	STR0026	,;		//"Limita o número de linhas do documento no lançamento  "
                	                      		STR0027	}})		//"contábil de integração.                               "

aAdd(aSX6,{"MV_CTBFLAG"	,"L",".T."		,""	, {STR0028	,;		//"Indica se a marcação dos flags de contabilização, cam-"
		                                       STR0029	,;		//"pos Fx_DTLANC ou Ex_LA, quando executadas as rotinas  "
        		                               STR0030	,;		//"de contabilização off-line será executada dentro do   "
											   STR0031	,; 		//"controle de transação do lançamento contábil no módulo"
											   STR0032	,;		//"Contabilidade Gerencial.                              "
		                                       STR0033	,;		//"T - Habilita marcação dos flags de contabilização     "
											   STR0034	,;		//"dentro do controle de transação;                      "
                		                       STR0035	,;		//"F - Marcação dos flags permanece através da rotina que"
											   STR0036	}})		//"chama a contabilização, fora do controle de transação."

aAdd(aSX6,{"MV_CTBAPLA"	,"C", "3"		,"", {STR0037	,;		//"Configura se, ao excluir lançamentos contábeis de     "
		                                       STR0038	,;		//"integração, será efetuada limpeza dos flags de        "
											   STR0039	,;		//"contabilização nas tabelas de origem dos lançamentos, "
											   STR0040	,;		//"permitindo nova integração dos movimentos para a      "
											   STR0041	,;		//"contabilidade, em que:                                "
		                                       STR0042	,;		//"1 - Inativo: não limpa os flags nas tabelas de origem "
											   STR0043	,;		//"do lançamento;                                        "
											   "                                                      "			,;
                        		               STR0044	,;		//"2 - Perguntar: pergunta ao usuário se deseja efetuar a"
											   STR0045	,;		//"remarcação de flags nas tabelas origem de integração; "
											   "                                                      "			,;
        		                               STR0046	,;		//"3 - Automático com alertas: remarca/limpa os flags nas"
											   STR0047	,;		//"tabelas origem de integração, sem perguntar ao usuário"
											   STR0048	,;		//"Exibe alertas e, caso detecte inconsistências, guarda "
											   STR0049	,;		//"log dos flags remarcados e não marcados na exclusão   "
											   "                                                      "			,;
        		                               STR0050	,;		//"4 - Automático sem alertas: remarca/limpa os flags nas"
											   STR0051	,;		//"tabelas origem de integração sem perguntar ao usuário."
											   STR0052	,;		//"Não exibe alertas de inconsistências, guarda log dos  "
											   STR0053	}})		//"flags remarcados e não marcados na exclusão.          "

aAdd(aSX6,{"MV_CT105MS","C","S"			,"", {STR0054	,;		//"Indica se exibe mensagens de alerta ao encontrar incon-"
		                                       STR0055	,;		//"sistências em lançamentos de integração se o sistema  "
											   STR0056	,;		//"estiver configurado para não permitir a alteração des-"
											   STR0057	,;		//"tes lançamentos no momento da contabilização (parâme- "
											   STR0058	,;		//"tro MV_ALTLCTO com conteúdo N)	                      "
                                		       STR0059	,;		//"Este tratamento se dará através do parâmetro          "
											   STR0060	,;		//"MV_CT105MS que poderá receber os seguintes conteúdos: "
        				                       STR0061	,;		//"- S: exibe mensagem (conteúdo padrão);                "
                        			           STR0062	}})		//"- N: não exibe.                                       "

aAdd(aSX6,{"MV_CONTBAT","C"	,"N"		,""	, {STR0063	,;		//"Não permite confirmar a inclusão/alteração de um lan- "
		                                       STR0064	}})		//"çamento contábil quando débito não bater com crédito  "

aAdd(aSX6,{"MV_CONTSB","C"	,"S"		,"", {STR0065	,;		//"Indica se a contabilização será feita mesmo que os    "
		                                       STR0066	,;		//"valores de débito e crédito não batam.                "
        		                               STR0067	,;		//"Se estiver com S, gravará o lançamento contábil sem "
											   STR0068	,;		//"verificação de valores.                               "
											   STR0069	}})		//"Caso contrário, dependerá do parmetro de MV_CONTBAT   "

aAdd(aSX6,{"MV_CONTSLD","C"	,"S"		,"", {STR0070	,;		//"Indica se a validação de Débito e Crédito do lançamen-"
			                                  STR0071	,;		//"to contábil será efetuada por Tipo de Saldo evitando  "
											   STR0072	,;		//"que sejam gerados lançamentos à débito e à credito em "
											   STR0073	,;		//"tipos de saldo diferentes.                            "
											   STR0074	,;		//"Se não for necessário efetuar esta validação, preen-  "
											   STR0075	}})		//"cher o conteúdo com N. 	                             "

aAdd(aSX6,{"MV_CTBVLDM"	,"C","12222"	,""	, {STR0076	,;		//"Indica em quais moedas o sistema fará a validação das "
                                    		   STR0077	,;		//"moedas. Ex. 11222 o sistema validará a moeda 1 e 2 ig-"
											   STR0078	}})		//"norando as outras moedas. 1222 - padrão do Sistema    "

aAdd(aSX6,{"MV_PRELAN","C","D"			,"", {STR0079	,;		//"Indica se a contabilização gera lançamentos contábeis "
		                                       STR0080	,; 		//"(N) ou pré-lançamentos (S) quando documento não bater "
											   STR0081	,;		//"débito com crédito ou no caso de não existirem cadas- "
											   STR0082	}})		//"tradas as entidades contábeis envolvidas.             "

aAdd(aSX6,{"MV_ALTLCTO","C"	,"N"		,"", {STR0083	,;		//"Permite alterar os lançamentos contábeis de integração"
		                                       STR0084	,;		//". No caso de não permitir a alteração de lançamentos, "
											   STR0085	,;		//"e se estes tenham alguma inconsistência de valor  ou  "
											   STR0086	,;		//"entidades contábeis não existentes, o lançamento será "
											   STR0087	,;		//"obrigatoriamente gravado como pré-lançamento. Obriga- "
											   STR0088	}})		//"torio alterar o parametro MV_PRELAN para D            "

aAdd(aSX6,{"MV_CT350QY","L"	, "T"		,"", {STR0089	,;		//"Habilita o uso de consulta SQL para otimização de de- "
		                                       STR0090	,;		//"sempenho na rotina de efetivação.                     "
											   STR0091	,;		//"T - consulta SQL habilitada.                          "
											   STR0092	}})		//"F - Consulta SQL desabilitada.                        "
	
aAdd(aSX6,{"MV_CT350SL","L"	, "T"		,"", {STR0093	,;		//"Configura atualização de saldos durante a efetivação  "
		                                       STR0094	,;		//"de pré-lançamentos CTB.                               "
											   STR0095	,;		//"T - Atualização de saldos na efetivação habilitada.   "
											   STR0096	}})		//"F - Atualização de saldos na efetivação desabilitada. "
	
aAdd(aSX6,{"MV_CT350TC","L"	, "F"		,""	, {STR0097	,;		//"Habilita trace/alerta com os tempos de processamento  "
		                                       STR0098	,;		//"ao final da rotina de efetivação.                     "
											   STR0099	,;		//"T - Trace/Alerta de desempenho habilitado.            "
											   STR0100	}})		//"F - Trace/Alerta de desempenho desabilitado.          "
	
aAdd(aSX6,{"MV_OPTNFE","L"	, "F"		,"", {STR0101	,;		//"Indica se a Contabilização da Nota Fiscal de Entrada  "
		                                       STR0102	,;		//"será efetuada com queries especificas.                "
 											   STR0103	,;		//"Ao alterar este parametro, deve-se verificar todos LPs"
 											   STR0104	}})		//"que estão envolvidos (CTBANFE).                       "
	
aAdd(aSX6,{"MV_OPTNFS","L"	, "F"		,"", {STR0105	,;		//"Indica se a Contabilização da Nota Fiscal de Saída se-"
		                                       STR0106	}})		//"rá efetuada com queries especificas (CTBANFS).        "

aAdd(aSX6,{"MV_CNFSTHR","N"	, "10"		,"", {STR0113	,;		//"Quantidade de Threads a serem utilizadas no processo"
 											   STR0114	,;		//"off-line contabilização das notas de Entrada/Saida."
		                                       STR0115	}})		//"(CTBANFE / CTBANFS)"

aAdd(aSX6,{"MV_CFINTHR","N"	, "10"		,"", {STR0113	,;		//"Quantidade de Threads a serem utilizadas no processo"
 											   STR0116	,;		//"off-line contabilização do Financeiro."
		                                       STR0117	}})		//"(CTBAFIN)"

aAdd(aProcesso,{"SIGACTB","CTBA105",STR0107,"24/01/2014","#CTB001",aTDN,aSX6})	   				//"Lançamento Contabil"
// Limpa dados para o proximo item
aSX6 := {}
aTDN := {}

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ CTBA190 - Reprocessamento Contabil               ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
aAdd(aProcesso,{"SIGACTB","CTBA190",STR0108,"24/01/2014","#CTB002",aTDN,aSX6,"01",.T.,""})	//"Reprocessamento Contabil"
// Limpa dados para o proximo item
aSX6 := {}
aTDN := {}

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ CTBA190 - Reprocessamento Contabil de Orcamentos ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
aAdd(aProcesso,{"SIGACTB","CTBA190",STR0109,"24/01/2014","#CTB003",aTDN,aSX6,"02",.T.,""})	//"Reprocessamento Contabil de Orcamentos"
// Limpa dados para o proximo item
aSX6 := {}
aTDN := {}

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ CTBA220 - Consolidacao geral de empresas         ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
aAdd(aProcesso,{"SIGACTB","CTBA220",STR0110,"24/01/2014","#CTB004",aTDN,aSX6,"03",.T.,""})	//"Consolidação geral de empresas"
// Limpa dados para o proximo item
aSX6 := {}
aTDN := {}

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ CTBXATU - Atualizacao de Saldos ON-LINE          ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
aAdd(aProcesso,{"SIGACTB","CTBXATU",STR0111,"24/01/2014","#CTB005",aTDN,aSX6,"06",.T.,""})	//"Atualização de Saldos ON-LINE"
// Limpa dados para o proximo item
aSX6 := {}
aTDN := {}

//ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
//³ JOB192 - Atualizacao de Saldos ON-LINE           ³
//ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
aAdd(aProcesso,{"SIGACTB","JOB192",STR0112,"24/01/2014","#CTB006",aTDN,aSX6,"07"})				//"Reprocessamento por Contas"
// Limpa dados para o proximo item
aSX6 := {}
aTDN := {}

Return aProcesso