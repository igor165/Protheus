#INCLUDE "PROTHEUS.CH"
#INCLUDE "APDA100.CH"

Static nRecno := Nil

/*/
зддддддддддбддддддддддбдддддбдддддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤└o    ЁAPDA100   ЁAutorЁMarinaldo de Jesus       Ё Data Ё16/07/2003Ё
цддддддддддеддддддддддадддддадддддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁCadastro de Participantes/Pessoas vs Objetivos              Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁGenerico                                                    Ё
цддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
Ё            ATUALIZACOES SOFRIDAS DESDE A CONSTRU─AO INICIAL           Ё
цддддддддддддбддддддддддбдддддддддддбддддддддддддддддддддддддддддддддддд╢
ЁProgramador ЁData      ЁBOPS       ЁMotivo da Alteracao                Ё
цддддддддддддеддддддддддедддддддддддеддддддддддддддддддддддддддддддддддд╢
ЁCecilia Car.Ё03/07/2014ЁTPZWBQ     ЁIncluido o fonte da 11 para a 12 e Ё
Ё            Ё          Ё           Ёefetuada a limpeza.                Ё  
юддддддддддддаддддддддддадддддддддддаддддддддддддддддддддддддддддддддддды/*/
Function APDA100( cAlias , nReg , nOpc , lExecAuto )

Local aArea		:= GetArea()
Local aAreaRdv	:= RDV->( GetArea() )
Local aAreaRdj	:= RDJ->( GetArea() )
Local aAreaRd0	:= RD0->( GetArea() )
Local aAreaRdw	:= RDW->( GetArea() )
Local lExistOpc	:= ( ValType( nOpc ) == "N" )
Local bBlock
Local nPos

Begin Sequence

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁSo Executa se o Modo de Acesso dos Arquivos do Modulo APD estiЁ
	Ёverem OK													   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( ApdRelationFile() )
		Break
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁRedefine o Alias                                              Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cAlias	:= "RD0"

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define Array contendo as Rotinas a executar do programa      Ё
	Ё ----------- Elementos contidos por dimensao ------------     Ё
	Ё 1. Nome a aparecer no cabecalho                              Ё
	Ё 2. Nome da Rotina associada                                  Ё
	Ё 3. Usado pela rotina                                         Ё
	Ё 4. Tipo de Transa┤└o a ser efetuada                          Ё
	Ё    1 - Pesquisa e Posiciona em um Banco de Dados             Ё
	Ё    2 - Simplesmente Mostra os Campos                         Ё
	Ё    3 - Inclui registros no Bancos de Dados                   Ё
	Ё    4 - Altera o registro corrente                            Ё
	Ё    5 - Remove o registro corrente do Banco de Dados          Ё
	Ё    6 - Copiar                                                Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	Private aRotina := MenuDef() // ajuste para versao 9.12 - chamada da funcao MenuDef() que contem aRotina

	Private cCadastro
	IF ( cModulo == "APD" )
		cCadastro   := OemToAnsi( STR0006 )	//"Participantes vs Objetivos"
	Else
		cCadastro   := OemToAnsi( STR0007 )	//"Pessoas vs Objetivos"
	EndIF	

	IF ( lExistOpc )

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁGarante o Posicinamento do Recno                              Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		DEFAULT nReg	:= ( cAlias )->( Recno() )
		IF !Empty( nReg )
			( cAlias )->( MsGoto( nReg ) )
		EndIF

		DEFAULT lExecAuto := .F.
		IF ( lExecAuto )

			nPos := aScan( aRotina , { |x| x[4] == nOpc } )
			IF ( nPos == 0 )
				Break
			EndIF
			bBlock := &( "{ |a,b,c,d| " + aRotina[ nPos , 2 ] + "(a,b,c,d) }" )
			Eval( bBlock , cAlias , nReg , nPos )
		
		Else

			Apda100Mnt( cAlias , nReg , nOpc , .T. )
		
		EndIF	

	Else

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Chama a Funcao de Montagem do Browse                                   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		RD0->( dbSetOrder( RetOrdem( cAlias , "RD0_FILIAL+RD0_CODIGO" ) ) )
		mBrowse( 6 , 1 , 22 , 75 , cAlias , NIL , NIL , NIL , "RD0->RD0_MSBLQL=='2'")
	EndIF
		
End Sequence

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁColoca o Ponteiro do Mouse em Estado de Espera			   	   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

RestArea( aAreaRdj )
RestArea( aAreaRdv )
RestArea( aAreaRd0 )
RestArea( aAreaRdw )
RestArea( aArea    )

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁRestaura o Cursor do Mouse                				   	   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()

Return( NIL )

/*/
зддддддддддбддддддддддддддбддддддбдддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤└o    ЁInApda100Exec ЁAutor ЁMarinaldo de Jesus   Ё Data Ё24/08/2004Ё
цддддддддддеддддддддддддддаддддддадддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁExecutar Funcoes Dentro de APDA100                           Ё
цддддддддддеддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁInApda100Exec( cExecIn , aFormParam )						 Ё
цддддддддддеддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									 Ё
цддддддддддеддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁRetorno   ЁuRet                                                 	     Ё
цддддддддддеддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁObserva┤└oЁ                                                      	     Ё
цддддддддддеддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁGenerico 													 Ё
юддддддддддаддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function InApda100Exec( cExecIn , aFormParam )
         
Local uRet

DEFAULT cExecIn		:= ""
DEFAULT aFormParam	:= {}

IF !Empty( cExecIn )
	cExecIn	:= BldcExecInFun( cExecIn , aFormParam )
	uRet	:= &( cExecIn )
EndIF

Return( uRet )

/*/
зддддддддддбддддддддддбдддддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100VisЁ Autor ЁMarinaldo de Jesus     Ё Data Ё27/02/2004Ё
цддддддддддеддддддддддадддддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁCadastro de Participantes/Pessoas ( Visualizar )			Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100Vis( cAlias , nReg )
Return( APDA100( cAlias , nReg , 2 ) )

/*/
зддддддддддбддддддддддбдддддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100IncЁ Autor ЁMarinaldo de Jesus     Ё Data Ё27/02/2004Ё
цддддддддддеддддддддддадддддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁCadastro de Participantes/Pessoas ( Incluir )				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100Inc( cAlias , nReg )
Return( APDA100( cAlias , nReg , 3 ) )

/*/
зддддддддддбддддддддддбдддддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100AltЁ Autor ЁMarinaldo de Jesus     Ё Data Ё27/02/2004Ё
цддддддддддеддддддддддадддддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁCadastro de Participantes/Pessoas ( Alterar )				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100Alt( cAlias , nReg )
Return( APDA100( cAlias , nReg , 4 ) )

/*/
зддддддддддбддддддддддбдддддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100DelЁ Autor ЁMarinaldo de Jesus     Ё Data Ё27/02/2004Ё
цддддддддддеддддддддддадддддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁCadastro de Participantes/Pessoas ( Excluir )				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<vide parametros formais>          							Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100Del( cAlias , nReg )
Return( APDA100( cAlias , nReg , 5 ) )

/*/
зддддддддддбддддддддддбдддддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100MntЁ Autor ЁMarinaldo de Jesus     Ё Data Ё18/06/2002Ё
цддддддддддеддддддддддадддддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁCadastro de Participantes/Pessoas (Manutencao)				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁApda100Mnt( cAlias , nReg , nOpc , lDlgPadSiga )			Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁcAlias 		= Alias do arquivo                              Ё
Ё          ЁnReg   		= Numero do registro                            Ё
Ё          ЁnOpc   		= Numero da opcao selecionada                   Ё
Ё          ЁlDlgPadSiga = Numero da opcao selecionada                   Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100Mnt( cAlias , nReg , nOpc , lDlgPadSiga )

Local aArea				:= GetArea(Alias())
Local aSvKeys			:= GetKeys()
Local aAdvSize			:= {}
Local aInfoAdvSize		:= {}
Local aObjSize			:= {}
Local aObjCoords		:= {}
Local aRd0Header		:= {}
Local aRd0Cols			:= {}
Local aRd0Fields		:= {}
Local aRd0Altera		:= {}
Local aRd0NaoAlt		:= {}
Local aRd0VirtEn		:= {}
Local aRd0NotFields		:= {}
Local aRd0Keys			:= {}
Local aRd0VisuEn		:= {}
Local aRdvHeader		:= {}
Local aRdvCols			:= {}
Local aRdvGdAltera  	:= {}
Local aRdvGdNaoAlt		:= {}
Local aRdvRecnos		:= {}
Local aRdvKeys			:= {}
Local aRdvNotFields		:= {}
Local aRdvVirtGd		:= {}
Local aRdvVisuGd		:= {}
Local aRdvMemoGd		:= {}
Local aSvRdvCols		:= {}
Local aRdvQuery			:= {}
Local aRdjGdAltera  	:= {}
Local aRdjGdNaoAlt		:= {}
Local aRdjRecnos		:= {}
Local aRdjKeys			:= {}
Local aRdjNotFields		:= {}
Local aRdjVirtGd		:= {}
Local aRdjVisuGd		:= {}
Local aRdjMemoGd		:= {}
Local aRdjFldsAux		:= {}
Local aSvRdjCols		:= {}
Local aRdjQuery			:= {}
Local aRdyRecnos		:= {}
Local aRdyKeys			:= {}
Local aFolders			:= Array( 02 )
Local aPages			:= Array( 02 )
Local aObjFolder		:= Array( 02 )
Local aSvSetModulo		:= {}
Local aButtons			:= {}
Local aFreeLocks		:= {}
Local aGdObjects		:= {}
Local bRdvGdDelOk		:= { |lDelOk| CursorWait() , lDelOk := RdvGdDelOk( nOpc , aRdjCols , oGdRdj ) , CursorArrow() , lDelOk }
Local bRdjGdDelOk		:= { |lDelOk| CursorWait() , lDelOk := RdjGdDelOk( nOpc , oGdRdv ) , CursorArrow() , lDelOk }
Local bRdvSort			:= { || NIL }
Local bRdjSort			:= { || NIL }
Local bSet15			:= { || NIL }
Local bSet24			:= { || NIL }
Local bDialogInit		:= { || NIL }
Local bRdvGdTudOk		:= { || NIL }
Local bGdSeek			:= { || NIL }
Local bGdLeg			:= { || NIL }
Local bSvRdvblDblClick	:= { || NIL }
Local bSvRdjblDblClick	:= { || NIL }
Local bGetRd0			:= { || NIL } 
Local bGetRdv			:= { || NIL }
Local bGetRdj			:= { || NIL }
Local cFilRD0			:= ""
Local cCodRD0			:= ""
Local cRD0KeySeek		:= ""
Local lLocks			:= .F.
Local lExecLock			:= ( ( nOpc <> 2 ) .and. ( nOpc <> 3 ) )
Local nActFolder		:= 0
Local nOpcAlt			:= 0
Local nRd0Usado			:= 0
Local nRdvUsado			:= 0
Local nRdjUsado			:= 0
Local nLoop				:= 0
Local nOpcNewGd			:= IF( ( ( nOpc == 2 ) .or. ( nOpc == 5 ) ) , 0 , GD_INSERT + GD_UPDATE + GD_DELETE	)
Local nRdvMaxLocks		:= 5
Local nRdvGhostCol		:= 0
Local nRdjMaxLocks		:= 5
Local nRdjGhostCol		:= 0
Local oDlg				:= NIL
Local oEndRd0			:= NIL	
Local oFolders			:= NIL
Local aFieldsAux		:= {}
Private nGetSX8Len		:= GetSX8Len()
Private __nRdvAtAnt		:= 0

Private aGets
Private aTela
Private aRdjHeader
Private aRdjCols   
Private cRdjNumGhostCol
Private oGdRdv
Private oGdRdj

nRecno := 0	//Garantir a validacao na mudanca do Folder
 
If RD0->(EOF())
	HELP(" ",1,"ARQVAZIO")
	Return(Nil)
EndIf
/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁPoe o cursor do Mouse em Estado de Espera					   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

Begin Sequence

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁCheca a Opcao Selecionada									   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aRotSetOpc( cAlias , NIL , nOpc , .F. )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Monta os Dados para a Enchoice							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aRd0NotFields	:= { "RD0_FILIAL" }
	bGetRd0			:= { |lExclu|	IF( lExecLock , lExclu := .T. , aRd0Keys := NIL ),;
										aRd0Cols := RD0->(;
															GdBuildCols(	@aRd0Header		,;	//01 -> Array com os Campos do Cabecalho da GetDados
																			@nRd0Usado		,;	//02 -> Numero de Campos em Uso
																			@aRd0VirtEn		,;	//03 -> [@]Array com os Campos Virtuais
																			@aRd0VisuEn		,;	//04 -> [@]Array com os Campos Visuais
																			"RD0"			,;	//05 -> Opcional, Alias do Arquivo Carga dos Itens do aCols
																			aRd0NotFields	,;	//06 -> Opcional, Campos que nao Deverao constar no aHeader
																			NIL         	,;	//07 -> [@]Array unidimensional contendo os Recnos
																			"RD0"		   	,;	//08 -> Alias do Arquivo Pai
																			NIL				,;	//09 -> Chave para o Posicionamento no Alias Filho
																			NIL				,;	//10 -> Bloco para condicao de Loop While
																			NIL				,;	//11 -> Bloco para Skip no Loop While
																			NIL				,;	//12 -> Se Havera o Elemento de Delecao no aCols 
																			NIL				,;	//13 -> Se Sera considerado o Inicializador Padrao
																			NIL				,;	//14 -> Opcional, Carregar Todos os Campos
																			NIL				,;	//15 -> Opcional, Nao Carregar os Campos Virtuais
																			NIL				,;	//16 -> Opcional, Utilizacao de Query para Selecao de Dados
																			NIL				,;	//17 -> Opcional, Se deve Executar bKey  ( Apenas Quando TOP )
																			NIL				,;	//18 -> Opcional, Se deve Executar bSkip ( Apenas Quando TOP )
																			NIL				,;	//19 -> Carregar Coluna Fantasma
																			NIL				,;	//20 -> Inverte a Condicao de aNotFields carregando apenas os campos ai definidos
																			NIL				,;	//21 -> Verifica se Deve Checar se o campo eh usado
																			NIL				,;	//22 -> Verifica se Deve Checar o nivel do usuario
																			NIL				,;	//23 -> Verifica se Deve Carregar o Elemento Vazio no aCols
																			@aRd0Keys		,;	//24 -> [@]Array que contera as chaves conforme recnos
																			NIL   			,;	//25 -> [@]Se devera efetuar o Lock dos Registros
																			@lExclu			 ;	//26 -> [@]Se devera obter a Exclusividade nas chaves dos registros
																	    );
														  ),;
										IF( lExecLock , ( lExclu ) , .T. );
	  					} 
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁLock do Registro do RD0									   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( lLocks := WhileNoLock( "RD0_RDJ" , NIL , NIL , 1 , 1 , .T. , 1 , 5 , bGetRd0 ) )
		Break
	EndIF
	CursorWait()
	cFilRD0			:= RD0->RD0_FILIAL
	cCodRD0			:= RD0->RD0_CODIGO
	cRD0KeySeek		:= ( xFilial( "RDJ" ,cFilRD0 ) + cCodRD0 )
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Cria as Variaveis de Memoria e Carrega os Dados Conforme o arЁ
	Ё quivo														   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	For nLoop := 1 To nRd0Usado
		aAdd( aRd0Fields , aRd0Header[ nLoop , 02 ] )
		SetMemVar( aRd0Header[ nLoop , 02 ] , aRd0Cols[ 01 , nLoop ] , .T. )
	Next nLoop
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Monta os Dados para a GetDados							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aAdd( aRdvNotFields , "RDV_FILIAL"  )
	aAdd( aRdvNotFields , "RDV_CODPAR"	)
	aAdd( aRdvNotFields , "RDV_CODPAP"	)
	aRdvQuery		:= Array( 05 )
	aRdvQuery[01]	:= "RDV_FILIAL='"+cFilRD0+"'"
	aRdvQuery[02]	:= " AND "
	aRdvQuery[03]	:= "RDV_CODPAR='"+cCodRD0+"'"
	aRdvQuery[04]	:= " AND "
	aRdvQuery[05]	:= "D_E_L_E_T_=' ' "
	RDV->( dbSetOrder( RetOrdem( "RDV" , "RDV_FILIAL+RDV_CODPAR+RDV_CODOBJ+RDV_CODPER" ) ) )
	
	aFieldsAux		:= { { "COLBMP" , "Apda100Leg(RDV->RDV_STATUS, Nil, Nil, Nil, Nil, 1)" } }

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Quando For Inclusao Posiciona o RDJ No Final do Arquivo	   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( nOpc == 3  ) //Inclusao
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Garante que na Inclusao o Ponteiro do RDJ estara em Eof()    Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		PutFileInEof( "RDV" )
	EndIF
	bGetRdv	:= { |lLock,lExclu| IF( lExecLock , ( lLock := .T. , lExclu := .T. ) , aRdvKeys := NIL ),;
						 		aRdvCols := RDV->(;
													GdBuildCols(	@aRdvHeader		,;	//01 -> Array com os Campos do Cabecalho da GetDados
																	@nRdvUsado		,;	//02 -> Numero de Campos em Uso
																	@aRdvVirtGd		,;	//03 -> [@]Array com os Campos Virtuais
																	@aRdvVisuGd		,;	//04 -> [@]Array com os Campos Visuais
																	"RDV"			,;	//05 -> Opcional, Alias do Arquivo Carga dos Itens do aCols
																	aRdvNotFields	,;	//06 -> Opcional, Campos que nao Deverao constar no aHeader
																	@aRdvRecnos		,;	//07 -> [@]Array unidimensional contendo os Recnos
																	"RD0"		   	,;	//08 -> Alias do Arquivo Pai
																	cRD0KeySeek		,;	//09 -> Chave para o Posicionamento no Alias Filho
																	NIL				,;	//10 -> Bloco para condicao de Loop While
																	NIL				,;	//11 -> Bloco para Skip no Loop While
																	NIL				,;	//12 -> Se Havera o Elemento de Delecao no aCols 
																	NIL				,;	//13 -> Se Sera considerado o Inicializador Padrao
																	NIL				,;	//14 -> Opcional, Carregar Todos os Campos
																	NIL				,;	//15 -> Opcional, Nao Carregar os Campos Virtuais
																	aRdvQuery		,;	//16 -> Opcional, Utilizacao de Query para Selecao de Dados
																	.F.				,;	//17 -> Opcional, Se deve Executar bKey  ( Apenas Quando TOP )
																	.F.				,;	//18 -> Opcional, Se deve Executar bSkip ( Apenas Quando TOP )
																	aFieldsAux		,;	//19 -> Carregar Coluna Fantasma
																	NIL				,;	//20 -> Inverte a Condicao de aNotFields carregando apenas os campos ai definidos
																	NIL				,;	//21 -> Verifica se Deve Checar se o campo eh usado
																	NIL				,;	//22 -> Verifica se Deve Checar o nivel do usuario
																	NIL				,;	//23 -> Verifica se Deve Carregar o Elemento Vazio no aCols
																	@aRdvKeys		,;	//24 -> [@]Array que contera as chaves conforme recnos
																	@lLock			,;	//25 -> [@]Se devera efetuar o Lock dos Registros
																	@lExclu			,;	//26 -> [@]Se devera obter a Exclusividade nas chaves dos registros
																	nRdvMaxLocks	,;	//27 -> Numero maximo de Locks a ser efetuado
																	Altera			 ;	//28 -> Utiliza Numeracao na GhostCol
															    );
													  ),;
								IF( lExecLock , ( lLock .and. lExclu ) , .T. );
	  		    }
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁLock do Registro do RDJ									   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( lLocks := WhileNoLock( "RDV" , NIL , NIL , 1 , 1 , .T. , nRdvMaxLocks , 5 , bGetRdv ) )
		Break
	EndIF
	
	CursorWait()

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁObtem o Pocisionamento no GHOSTCOL							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	nRdvGhostCol	:= GdFieldPos( "GHOSTCOL" , aRdvHeader )
	IF ( nRdvGhostCol > 0 )
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Define Bloco para Sorteio das Informacoes Antes da Gravacao  Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		bRdvSort := { || CursorWait() , aSort( aRdvCols , NIL , NIL , { |x,y| ( x[ nRdvGhostCol ] < y[ nRdvGhostCol ] ) } ) , CursorArrow() }
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁEfetuo Copia para Comparacao na Saida						   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aSvRdvCols	:= aClone( aRdvCols )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define os Campos Memos                     				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aAdd( aRdvMemoGd , { "RDV_PAPEL" , "RDV_CODPAP" } ) 
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define os Campos Nao Alteraveis            				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	For nLoop := 1 To Len( aRdvMemoGd )
		aAdd( aRdvGdNaoAlt  , aRdvMemoGd[ nLoop , 02 ] )
	Next nLoop
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega os Campos Editaveis para a GetDados				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	For nLoop := 1	To nRdvUsado
		SetMemVar( aRdvHeader[ nLoop , 02 ] , GetValType( aRdvHeader[ nLoop , 08 ] , aRdvHeader[ nLoop , 04 ] ) , .T. )
		IF (;
			 	(;
					( aScan( aRdvVirtGd		, aRdvHeader[ nLoop , 02 ] ) == 0 ) .and.	;
		   			( aScan( aRdvVisuGd		, aRdvHeader[ nLoop , 02 ] ) == 0 ) .and.	;
		   			( aScan( aRdvNotFields	, aRdvHeader[ nLoop , 02 ] ) == 0 ) .and.	;
		   			( aScan( aRdvGdNaoAlt	, aRdvHeader[ nLoop , 02 ] ) == 0 )			;
		   	 	) .or. ;
		   	 	( aScan( aRdvMemoGd	, { |x| aRdvHeader[ nLoop , 02 ] == x[1] } ) > 0 )	;
		  	)
			aAdd( aRdvGdAltera , aRdvHeader[ nLoop , 02 ] )
		EndIF
	Next nLoop
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁCarrega os Recnos e as Chaves correspondentes dos campos MemosЁ
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( ( nOpc <> 2 ) .and. ( nOpc <> 3 ) )
		IF !( lLocks := ApdMemRec( "RDV" , aRdvRecnos , aRdvMemoGd , @aRdyRecnos , @aRdyKeys , .T. ) )
			Break
		EndIF
    EndIF

	/*
	зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁCarrega as Variaveis de Memoria para o RDI                	  Ё
	юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
	SetMemVar( "RDI_ESCREL" , GetValType( GetSx3Cache( "RDI_ESCREL" , "X3_TIPO" ) , GetSx3Cache( "RDI_ESCREL" , "X3_TAMANHO" ) ) , .T. )
	SetMemVar( "RDI_ESCATG" , GetValType( GetSx3Cache( "RDI_ESCATG" , "X3_TIPO" ) , GetSx3Cache( "RDI_ESCATG" , "X3_TAMANHO" ) ) , .T. )
	SetMemVar( "RDI_ESCCON" , GetValType( GetSx3Cache( "RDI_ESCCON" , "X3_TIPO" ) , GetSx3Cache( "RDI_ESCCON" , "X3_TAMANHO" ) ) , .T. )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define os Campos que nao serao carregados					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aAdd( aRdjNotFields , "RDJ_FILIAL"  )
	aAdd( aRdjNotFields , "RDJ_CODPAR"	)

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define Array com os Campos Auxiliares    					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aRdjFldsAux	:= { { "GHOSTCOL" , "RdjNumGhostCol()" }, 	{ "COLBMP" , "Apda100Leg(RDJ->RDJ_STATUS, Nil, Nil, Nil, Nil, 2)" } }

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Monta os Dados para a GetDados							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aRdjQuery		:= Array( 05 )
	aRdjQuery[01]	:= "RDJ_FILIAL='"+cFilRd0+"'"
	aRdjQuery[02]	:= " AND "
	aRdjQuery[03]	:= "RDJ_CODPAR='"+cCodRd0+"'"
	aRdjQuery[04]	:= " AND "
	aRdjQuery[05]	:= "D_E_L_E_T_=' ' "
/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁCarrega Informacoes do RDJ									   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		bGetRdj	:= { |lLock,lExclu| IF( lExecLock , ( lLock := .T. , lExclu := .T. ) , aRdjKeys := NIL ),;
						 			aRdjCols := RDJ->(;
														GdBuildCols(	@aRdjHeader		,;	//01 -> Array com os Campos do Cabecalho da GetDados
																		@nRdjUsado		,;	//02 -> Numero de Campos em Uso
																		@aRdjVirtGd		,;	//03 -> [@]Array com os Campos Virtuais
																		@aRdjVisuGd		,;	//04 -> [@]Array com os Campos Visuais
																		"RDJ"			,;	//05 -> Opcional, Alias do Arquivo Carga dos Itens do aCols
																		aRdjNotFields	,;	//06 -> Opcional, Campos que nao Deverao constar no aHeader
																		@aRdjRecnos		,;	//07 -> [@]Array unidimensional contendo os Recnos
																		"RD0"		   	,;	//08 -> Alias do Arquivo Pai
																		cRD0KeySeek		,;	//09 -> Chave para o Posicionamento no Alias Filho
																		NIL				,;	//10 -> Bloco para condicao de Loop While
																		NIL				,;	//11 -> Bloco para Skip no Loop While
																		NIL				,;	//12 -> Se Havera o Elemento de Delecao no aCols 
																		NIL				,;	//13 -> Se Sera considerado o Inicializador Padrao
																		NIL				,;	//14 -> Opcional, Carregar Todos os Campos
																		NIL				,;	//15 -> Opcional, Nao Carregar os Campos Virtuais
																		aRdjQuery		,;	//16 -> Opcional, Utilizacao de Query para Selecao de Dados
																		.F.				,;	//17 -> Opcional, Se deve Executar bKey  ( Apenas Quando TOP )
																		.F.				,;	//18 -> Opcional, Se deve Executar bSkip ( Apenas Quando TOP )
																		aRdjFldsAux		,;	//19 -> Carregar Coluna Fantasma
																		NIL				,;	//20 -> Inverte a Condicao de aNotFields carregando apenas os campos ai definidos
																		NIL				,;	//21 -> Verifica se Deve Checar se o campo eh usado
																		NIL				,;	//22 -> Verifica se Deve Checar o nivel do usuario
																		NIL				,;	//23 -> Verifica se Deve Carregar o Elemento Vazio no aCols
																		@aRdjKeys		,;	//24 -> [@]Array que contera as chaves conforme recnos
																		@lLock			,;	//25 -> [@]Se devera efetuar o Lock dos Registros
																		@lExclu			,;	//26 -> [@]Se devera obter a Exclusividade nas chaves dos registros
																		nRdjMaxLocks	,;	//27 -> Numero maximo de Locks a ser efetuado
																		.T.				 ;	//28 -> Utiliza Numeracao na GhostCol
																    );
											  		),;
									IF( lExecLock , ( lLock .and. lExclu ) , .T. );
	  		    }
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁLock do Registro do RDJ									   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( lLocks := WhileNoLock( "RDJ" , NIL , NIL , 1 , 1 , .T. , nRdjMaxLocks , 5 , bGetRdj ) )
		Break
	EndIF

	CursorWait()

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁObtem o Pocisionamento no GHOSTCOL							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	nRdjGhostCol	:= GdFieldPos( "GHOSTCOL" , aRdjHeader )
	IF ( nRdjGhostCol > 0 )
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁObtem a ultima numeracao Gerada							   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		cRdjNumGhostCol	:= aRdjCols[ Len( aRdjCols ) , nRdjGhostCol ]
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Define Bloco para Sorteio das Informacoes Antes da Gravacao  Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		bRdjSort := { || CursorWait() , aSort( aRdjCols , NIL , NIL , { |x,y| ( x[ nRdjGhostCol ] < y[ nRdjGhostCol ] ) } ) , CursorArrow() }
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁEfetuo Copia para Comparacao na Saida						   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aSvRdjCols	:= aClone( aRdjCols )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁGaranto que o Ponteiro Estara no Final do Arquivo para que naoЁ
	ЁCarregue Conteudo Invalido nos Inicializadores Padroes        Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	PutFileInEof( "RDJ" )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁSe ja houver informacoes no RDJ nao Permite a Inclusao, apenasЁ
	Ёalteracao ou Exclusao										   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( ( nOpc <> 3 ) .and. ( Len( aRdvRecnos ) == 0 ) )
		//"NЦo existem objetivos cadastrados para este participante. Selecione a op┤└o de InclusЦo"
		MsgInfo(  OemToAnsi( STR0031 ) , cCadastro )
		Break
	ElseIF ( ( nOpc == 3 ) .and. ( Len( aRdvRecnos ) > 0 ) )
		//"J═ Existem objetivos cadastrados para este participante. Selecione a op┤└o de Altera┤└o"
		MsgInfo(  OemToAnsi( STR0015 ) , cCadastro )
		Break
	ElseIF ( nOpc == 5 )
		IF !( Apda100ChkDel( oGdRdv , aRdjHeader , aRdjCols ) )
			//"Existem Itens de Objetivos jА aprovados. A ExclusЦo nЦo serА efetuada."
			MsgInfo( STR0030 , cCadastro )
			Break
		EndIF
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define os Campos Memos                     				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aAdd( aRdjMemoGd , { "RDJ_DESMEM" 	, "RDJ_CODMEM" } )
	aAdd( aRdjMemoGd , { "RDJ_DESDOR"	, "RDJ_CODDER" } )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define os Campos Nao Alteraveis            				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	For nLoop := 1 To Len( aRdjMemoGd )
		aAdd( aRdjGdNaoAlt  , aRdjMemoGd[ nLoop , 02 ] )
	Next nLoop

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega os Campos Editaveis para a GetDados				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	For nLoop := 1	To nRdjUsado
		SetMemVar( aRdjHeader[ nLoop , 02 ] , GetValType( aRdjHeader[ nLoop , 08 ] , aRdjHeader[ nLoop , 04 ] ) , .T. )
		IF (;
				(;
					( aScan( aRdjVirtGd		, aRdjHeader[ nLoop , 02 ] ) == 0 ) .and.	;
		   			( aScan( aRdjVisuGd		, aRdjHeader[ nLoop , 02 ] ) == 0 ) .and.	;
		   			( aScan( aRdjNotFields	, aRdjHeader[ nLoop , 02 ] ) == 0 ) .and.	;
		   			( aScan( aRdjGdNaoAlt	, aRdjHeader[ nLoop , 02 ] ) == 0 )			;
		   		) .or. ;
		   		( aScan( aRdjMemoGd	, { |x| aRdjHeader[ nLoop , 02 ] == x[1] } ) > 0 )	;
		  	)
			aAdd( aRdjGdAltera , aRdjHeader[ nLoop , 02 ] )
		EndIF
	Next nLoop

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁCarrega os Recnos e as Chaves correspondentes dos campos MemosЁ
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( ( nOpc <> 2 ) .and. ( nOpc <> 3 ) )
		IF !( lLocks := ApdMemRec( "RDJ" , aRdjRecnos , aRdjMemoGd , @aRdyRecnos , @aRdyKeys , .T. ) )
			Break
		EndIF
    EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Monta as Dimensoes dos Objetos         					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	DEFAULT lDlgPadSiga	:= .F.
	aAdvSize		:= MsAdvSize( NIL , lDlgPadSiga )
	aInfoAdvSize	:= { aAdvSize[1] , aAdvSize[2] , aAdvSize[3] , aAdvSize[4] , 0 , 0 }
	aObjSize		:= MsObjSize( aInfoAdvSize , aObjCoords )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Bloco para o TudoOk da GetDados do RDV			   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	bRdvGdTudOk		:= { || oGdRdv:TudoOk() }						//Valida as Informacoes da GetDados RDV
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Bloco para o TudoOk da GetDados do RDJ			   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	bRdjGdTudOk		:= { || oGdRdj:TudoOk() }						//Valida as Informacoes da GetDados RDJ

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Bloco para a Tecla <CTRL-O>						   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	bSet15		:= { || IF(; 
								( ( nOpc == 3 ) .or. ( nOpc == 4 ) );			//Inclusao ou Alteracao
								.and.;
								Eval( bRdvGdTudOk );							//Valida as Informacoes da GetDados
								.and.;
								Eval( bRdjGdTudOk ),;							//Valida as Informacoes da GetDados
								(;
									Eval( oGdRdv:bChange , .T. ),;				//Transere as informacoes Atuais para o aRdjCols
									aRdvCols := oGdRdv:aCols,;					//Redireciona o Ponteiro do aRdvCols
									nOpcAlt := 1 ,;
									RestKeys( aSvKeys , .T. ),;
									oDlg:End();
							 	),;
							 	IF(;
							 		( ( nOpc == 3 ) .or. ( nOpc == 4 ) ) ,;		//Inclusao ou Visualizacao
							 			(;
							 				nOpcAlt := 0 ,;
							 				.F.;
							 			 ),;
									(;
										nOpcAlt := IF( nOpc == 2 , 0 , 1 ) ,;	//Visualizacao ou Exclusao
										RestKeys( aSvKeys , .T. ),;
										oDlg:End();
							 		);
							 	  );
						   );
					 }
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Bloco para a Tecla <CTRL-X>     	   				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	bSet24		:= { || ( nOpcAlt := 0 , RestKeys( aSvKeys , .T. ) , oDlg:End() ) }

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Botao de Pesquisa na GetDados					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	bGdSeek := { ||	Apda100GdSeek( aGdObjects , nActFolder , aPages , aObjFolder )	,;
					SetKey( VK_F4 , bGdSeek ) ;
			   }
	aAdd(;
			aButtons	,;
							{;
								"BMPCONS"							,;
	   							bGdSeek								,;
	       	   					OemToAnsi( STR0001 + "...<F4>"  )	,;	//"Pesquisar"
	       	   					OemToAnsi( STR0001 )				 ;	//"Pesquisar"
	           				};
	     )

	bGdLeg := { ||	Apda100Leg("#", aGdObjects , nActFolder , aPages , aObjFolder, 0)	,;
					SetKey( VK_F5 , bGdLeg ) ;
			   }
	aAdd(;
			aButtons	,;
							{;
								"VERNOTA"							,;
	   							bGdLeg								,;
	       	   					OemToAnsi( STR0039+ "...<F5>"  )	,;	//"Legenda"
	       	   					OemToAnsi( STR0039)				 	;	//"Legenda"
	           				};
	     )


	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Bloco para a Inicializacao do Dialog            	   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	bDialogInit		:= { ||;
								oGdRdv:Hide()											,;
								oGdRdj:Hide()											,;
								aObjFolder[01,01,01] := oEndRd0							,;
								aObjFolder[01,01,02] := { || .T. }						,;
								aObjFolder[01,01,03] := NIL								,;
								aObjFolder[02,01,01] := oGdRdv							,;
								aObjFolder[02,01,02] := bRdvGdTudOk						,;
								aObjFolder[02,01,03] := NIL								,;
								aObjFolder[02,02,01] := oGdRdj							,;
								aObjFolder[02,02,02] := bRdjGdTudOk						,;
								aObjFolder[02,02,03] := NIL								,;
								EnchoiceBar( oDlg , bSet15 , bSet24 , NIL , aButtons )	,;
								SetKey( VK_F4 , bGdSeek )								,;
								aGdObjects := {}										,;
					 	 		SetKey( VK_F5 , bGdLeg )								,;
								aRotSetOpc( cAlias , NIL , nOpc , .F. )					 ;
					   }

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Conteudo do aPages								   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aPages[ 01 ]   		:= OemToAnsi( IF( cModulo == "APD" , STR0008 /*"Participante"*/ , STR0009 /*"Pessoa"*/ ) )
	aPages[ 02 ]		:= OemToAnsi( STR0014 /*"Objetivos"*/ )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define o Conteudo do aFolders								   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aFolders[ 01 ] 		:= OemToAnsi( "&"+IF( cModulo == "APD" , STR0008 /*"Participante"*/ , STR0009 /*"Pessoa"*/ ) )
	aFolders[ 02 ] 		:= OemToAnsi( "&"+STR0014 /*"Ojetivos"*/ )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Define os Elementos para o Array do Objeto Folder        	   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	aObjFolder[ 01 ]	:= Array( 01 , 03 )
	aObjFolder[ 02 ]	:= Array( 02 , 03 )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁGarante o Posicionamento do RD0							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	RD0->( MsGoto( nReg ) )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Monta o Dialogo Principal para a Manutencao das Formulas	   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	DEFINE MSDIALOG oDlg TITLE cCadastro From aAdvSize[7],0 TO aAdvSize[6],aAdvSize[5] OF GetWndDefault() PIXEL

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Monta as Dimensoes do Objeto Folder   					   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		aAdd( aObjCoords , { 000 , 000 , .T. , .T. } )
		aObjSize := MsObjSize( aInfoAdvSize , aObjCoords )
		
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Carrega o Objeto Folder               					   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		oFolders := TFolder():New(	aObjSize[ 1 , 1 ]		,;
									aObjSize[ 1 , 2 ]		,;
									aFolders				,;
									aPages					,;
									oDlg					,;
									NIL						,;
									NIL						,;
									NIL						,;
									.T.						,;
									.F.						,;
									aObjSize[ 1 , 4 ]		,;
									aObjSize[ 1 , 3 ]		 ;
								 )
 		oFolders:bSetOption := { |nNewFolder| Apda100VldRec(), FolderSetOption( nNewFolder , oFolders:nOption , aObjFolder , @aGdObjects , @nActFolder ) }

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Monta as Dimensoes para o Objeto Enchoice 				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		aObjCoords := {}
		aAdd( aObjCoords , { 000 , 000 , .T. , .T. } )
		aObjSize := MsObjSize( aInfoAdvSize , aObjCoords )
		aObjSize[ 1 , 1 ] += 15 //Alinha em Relacao ao Folder

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Monta o Objeto Enchoice para o RD0                      	   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		oEndRd0	:= MsmGet():New(	cAlias					,;
									nReg					,;
									2						,;
									NIL						,;
									NIL						,;
									NIL						,;
									aRd0Fields				,;
									aObjSize[1]				,;
									aRd0Altera				,;
									NIL						,;
									NIL						,;
									NIL						,;
									oFolders:aDialogs[ 01 ]	,;
									NIL						,;
									.F.						,;
									NIL						,;
									.F.			 			 ;
								)

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Monta as Dimensoes para os Objetos GetDados   	   		   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		aObjCoords := {}
		aAdd( aObjCoords , { 000 , 000 , .T. , .T. } )
		aAdd( aObjCoords , { 000 , 000 , .T. , .T. } )
		aObjSize := MsObjSize( aInfoAdvSize , aObjCoords )
		aObjSize[ 1 , 1 ] += 15 //Alinha em Relacao ao Folder

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Monta o Objeto GetDados para o RDJ						   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		oGdRdv	:= MsNewGetDados():New(	aObjSize[1,1]								,;
										aObjSize[1,2]								,;
										aObjSize[1,3]								,;
										aObjSize[1,4]								,;
										nOpcNewGd									,;
										"RdvGdLinOk"								,;
										"RdvGdTudOk"								,;
										""											,;
										aRdvGdAltera								,;
										0											,;
										9999										,;
										NIL											,;
										NIL											,;
										bRdvGdDelOk									,;
										oDlg										,;
										aRdvHeader									,;
										aRdvCols									 ;
									 )
		oGdRdv:oBrowse:bGotFocus := { || RdvGotFocus( oGdRdv ) }
		oGdRdv:bChange := { |lColsToAll| Rdv2RdjChg( oGdRdv , @oGdRdj , @aRdjCols , lColsToAll ) }
		oGdRdv:oBrowse:cToolTip := OemToAnsi( STR0035 )	//"Objetivos"
	/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Redefine oGdRdv:oBrowse:blDblClick						   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		bSvRdvblDblClick := oGdRdv:oBrowse:blDblClick

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Monta o Objeto GetDados para o RDJ						   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		oGdRdj	:= MsNewGetDados():New(	aObjSize[2,1]											,;
										aObjSize[2,2]											,;
										aObjSize[2,3]											,;
										aObjSize[2,4]											,;
										nOpcNewGd												,;
										"RdjGdLinOk"											,;
										"RdjGdTudOk"											,;
										""														,;
										aRdjGdAltera											,;
										0														,;
										999999													,;
										NIL														,;
										NIL														,;
										bRdjGdDelOk												,;
										oDlg													,;
										aRdjHeader												,;
										GdRmkaCols( aRdjHeader , .F. , .T. , .T. , NIL , .F. )	 ;
									 )
		oGdRdj:oBrowse:bGotFocus	:= { || RdiSetEscalas( oGdRdv ) , RdjGotFocus( oGdRdj ) }
		oGdRdj:oBrowse:cToolTip		:= OemToAnsi( STR0036 )	//"Itens dos Objetivos"
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Redefine oGdRdj:oBrowse:blDblClick						   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		bSvRdjblDblClick := oGdRdj:oBrowse:blDblClick

	ACTIVATE MSDIALOG oDlg ON INIT Eval( bDialogInit ) CENTERED

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Coloca o Ponteiro do Mouse em Estado de Espera			   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	CursorWait()

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁGarante o Posicionamento do RD0							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	RD0->( MsGoto( nReg ) )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁQuando Confirmada a Opcao e Nao for Visualizacao Grava ou   ExЁ
	Ёclui as Informacoes do RD0 e RDJ							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF( nOpcAlt == 1 )
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Apenas se nao For Visualizacao              				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
 		IF ( nOpc != 2 )
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Gravando/Incluido ou Excluindo Informacoes do SRY/RDJ        Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			MsAguarde(;
							{ ||;
									Eval( bRdvSort  ),;				//Sorteia o aRdvCols para Comparacao na Gravacao
									Eval( bRdjSort  ),;				//Sorteia o aRdjCols para Comparacao na Gravacao
									Apda100Grava(;
													nOpc		,;	//Opcao de Acordo com aRotina
							 						nReg		,;	//Numero do Registro do Arquivo Pai ( RD0 )
							 						aRdvHeader	,;	//Campos do Arquivo Filho ( RDV )
							 						aRdvCols	,;	//Itens Atual do Arquivo Filho ( RDV )
							 						aSvRdvCols	,;	//Itens Anteriores do Arquivo Filho ( RDV )
							 						aRdvVirtGd	,;	//Campos Virtuais do Arquivo Filho ( RDV )
							 						aRdvRecnos	,;	//Recnos do Arquivo Filho ( RDV )
							 						aRdvMemoGd	,;	//Campos Memo  ( RDV )							 						
							 						aRdjHeader	,;	//Campos do Arquivo de Sub-Itens ( RDJ )
							 						aRdjCols	,;	//Sub-Itens Atuis do Arquivo de Sub-Itens ( RDJ )
							 						aSvRdjCols	,;	//Sub-Itens Anteriores do Arquivo de Sub-Itens ( RDJ )
							 						aRdjVirtGd	,;	//Campos Virtuais do Arquivo de Sub-Itens ( RDJ )
							 						aRdjRecnos	,;	//Recnos do Arquivo de Sub-Itens ( RDJ )
							 						aRdjMemoGd	 ;	//Campos Memo na de Sub-Itens ( RDJ )
							 					);
		 					 };
						)
		EndIF
	Else
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё RollBack da Numeracao Automatica            				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		While ( GetSX8Len() > nGetSX8Len )
			RollBackSX8()
		End While
	EndIF

End Sequence

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Coloca o Ponteiro do Mouse em Estado de Espera			   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁLibera os Locks             								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
aAdd( aFreeLocks , { "RDJ_RD0"	, NIL 			, aRd0Keys } )
aAdd( aFreeLocks , { "RDJ"		, aRdjRecnos	, aRdjKeys } )
aAdd( aFreeLocks , { "RDY" 		, aRdyRecnos	, aRdyKeys } )
ApdFreeLocks( aFreeLocks )

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁRestaura os Dados de Entrada								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
RestArea( aArea )

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁRestaura as Teclas de Atalho											 Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
RestKeys( aSvKeys , .T. )

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁRestaura o Estado do Ponteiro do Mouse						   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()

Return( MbrChgLoop( .F. ) )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100ChkDelЁAutorЁMarinaldo de Jesus    Ё Data Ё04/05/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁVerifica se Pode Haver Exclusao de Todos os Itens          	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080                                                		Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100ChkDel( oGdRdv , aRdjHeader , aRdjCols )

Local lDelOk := .T.

Local nLoop
Local nLoops

Private aHeader := aRdjHeader
Private aCols	:= aRdjCols
Private n

nLoops := Len( aRdjCols )
For nLoop := 1 To nLoops
	n := nLoop
	IF !( lDelOk := RdjGdDelOk( 4 , oGdRdv , .T. , .F. ) )
		Exit
	EndIF
Next nLoop	

Return( lDelOk )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100GdSeekЁAutorЁMarinaldo de Jesus    Ё Data Ё01/05/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁEfetuar Pesquisa na GetDados                               	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080                                                		Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function Apda100GdSeek( aGdObjects , nActFolder , aPages , aObjFolder )

Local aSvKeys 		:= GetKeys()
Local cProcName3	:= Upper( AllTrim( ProcName( 3 ) ) )
Local cProcName5	:= Upper( AllTrim( ProcName( 5 ) ) )

Local cMsgInfo
Local cTitle
Local nPosGdObj             

DEFAULT aGdObjects := {}

Begin Sequence

	IF !( "APDA100MNT" $ ( cProcName3 + cProcName5 ) )
		Break
	EndIF

	IF (;
			Empty( aGdObjects );
			.or.;
			( ( nPosGdObj := aScan( aGdObjects[ nActFolder ] , .T. ) ) == 0 );
		)	
		cMsgInfo := STR0022	//"OpГЦo disponМvel apenas para pesquisa na(s) Pasta(s):"
		cMsgInfo += CRLF
		cMsgInfo += aPages[ 02 ]
		MsgInfo( OemToAnsi( cMsgInfo ) , cCadastro )
		Break
	EndIF

	nObj := GetObjGdSeek( aGdObjects , nActFolder , aObjFolder , @cTitle )
	IF ( nObj == 0 )
		Break
	EndIF
	GdSeek( aObjFolder[ nActFolder , nObj , 01 ] , OemToAnsi( cTitle ) )

End Sequence

RestKeys( aSvKeys , .T. )

Return( NIL )

/*/
зддддддддддбддддддддддддддддбдддддбдддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o	   ЁGetObjGdSeek	ЁAutorЁMarinaldo de Jesus Ё Data Ё12/08/2004Ё
цддддддддддеддддддддддддддддадддддадддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁRetorna as Opcoes para Pesquisa na GetDados                 Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ 															Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁRetorno   ЁNumero do Objeto para Pesquisa na GetDados                  Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso	   ЁApda100GdSeek() em APDA080()							    Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function GetObjGdSeek( aGdObjects , nActFolder , aObjFolder , cTitle )

Local aSvKeys		:= GetKeys()
Local aItens		:= {}
Local aObjs			:= {}
Local bSet15		:= { || lOpcOk	:= .T.	, RestKeys( aSvKeys , .T. ) , oDlg:End() }
Local bSet24		:= { || nOpcRel	:= 0	, RestKeys( aSvKeys , .T. ) , oDlg:End() }
Local lOpcOk		:= .F.
Local nOpjGdSeek	:= 1

Local nLoop
Local nLoops
Local oRadio
Local oDlg
Local oGroup
Local oFont

//здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
//Ё DeclaraГЦo de arrays para dimensionar tela		             Ё
//юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды
Local aAdvSize		:= {}
Local aInfoAdvSize	:= {}
Local aObjSize		:= {}
Local aObjCoords	:= {}
Local aGDCoord		:= {}
/*
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Monta as Dimensoes dos Objetos         					   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
aAdvSize		:= MsAdvSize()
aAdvSize[5]	:=	(aAdvSize[5]/100) * 60	//horizontal
aAdvSize[6]	:=  (aAdvSize[6]/100) * 40	//Vertical
aInfoAdvSize	:= { aAdvSize[1] , aAdvSize[2] , aAdvSize[3] , aAdvSize[4] , 0 , 0 }					 
aAdd( aObjCoords , { 000 , 000 , .T. , .T. } )
aObjSize	:= MsObjSize( aInfoAdvSize , aObjCoords )
aGdCoord	:= { (aObjSize[1,1]+3), (aObjSize[1,2]+5), (((aObjSize[1,3])/100)*30), (((aObjSize[1,4])/100)*55) }	//1,3 Vertical /1,4 Horizontal

Begin Sequence

	DEFAULT cTitle := STR0001 + " "	//Pesquisar
	nLoops := Len( aObjFolder[ nActFolder ] )
	For nLoop := 1 To nLoops
		IF aGdObjects[ nActFolder , nLoop ]
			aAdd( aObjs , nLoop )
			aAdd( aItens , aObjFolder[ nActFolder , nLoop , 1 ]:oBrowse:cToolTip )
		EndIF
	Next nLoop

	DEFINE FONT oFont NAME "Arial" SIZE 0,-11 BOLD
	DEFINE MSDIALOG oDlg FROM  aAdvSize[7],0 TO aAdvSize[6],aAdvSize[5] TITLE OemToAnsi( STR0001 ) PIXEL	//"Pesquisar"
	
		@ aGdCoord[1],aGdCoord[2]	GROUP oGroup TO aGdCoord[3],aGdCoord[4] LABEL OemToAnsi(STR0034) OF oDlg PIXEL	//"Selecione o Objeto da Pesquisa"
		oGroup:oFont:=oFont

 		oRadio 			:= TRadMenu():New( aGdCoord[1]+10,aGdCoord[2]+5 , aItens , NIL , oDlg , NIL , NIL , NIL , NIL , NIL , NIL , NIL , 115 , 010 , NIL , NIL , NIL , .T. )
		oRadio:bSetGet	:= { |nItem| IF( nItem <> NIL , nOpjGdSeek := nItem , nOpjGdSeek ) }
		oDlg:lEscClose	:= .F. //Nao permite sair ao se pressionar a tecla ESC.
	
	ACTIVATE MSDIALOG oDlg CENTERED ON INIT EnchoiceBar( oDlg , bSet15 , bSet24 )
	RestKeys( aSvKeys , .T. )
	
	IF !( lOpcOk )
		nOpjGdSeek := 0
	Else
		cTitle 		+= aItens[ nOpjGdSeek ]
		nOpjGdSeek  := aObjs[ nOpjGdSeek ]
	EndIF

End Sequence

Return( nOpjGdSeek )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvGotFocus	 	 ЁAutorЁMarinaldo de JesusЁ Data Ё05/08/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁGotFocus para os Objetos GetDados do RDV					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080()													Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdvGotFocus( oGdRdv )

IF Empty( __nRdvAtAnt )
	__nRdvAtAnt := oGdRdv:oBrowse:nAt
EndIF	

Return( NIL )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjGotFocus	 	 ЁAutorЁMarinaldo de JesusЁ Data Ё06/08/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁGotFocus para os Objetos GetDados do RDJ					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080()													Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdjGotFocus( oGdRdj )

Local aCposPut	:= {} 
Local lGdPut	:= .F.

Local cLastCnt
Local cNewCnt 
Local nLoop
Local nLoops

aAdd( aCposPut , { "RDJ_ESCREA" , "RDI_ESCREL" } )
aAdd( aCposPut , { "RDJ_ESCATG" , "RDI_ESCATG" } )
aAdd( aCposPut , { "RDJ_ESCCON" , "RDI_ESCCON" } )

nLoops := Len( aCposPut )
For nLoop := 1 To nLoops
	IF ( Empty( GdFieldGet( aCposPut[ nLoop , 1 ] , oGdRdj:nAt , .F. , oGdRdj:aHeader , oGdRdj:aCols ) ) )
		cNewCnt		:= GetMemVar( aCposPut[ nLoop , 2 ] )
		cLastCnt	:= GdFieldPut( aCposPut[ nLoop , 1 ] , cNewCnt , oGdRdj:nAt , oGdRdj:aHeader , oGdRdj:aCols , .F. )
		IF !( lGdPut )
			lGdPut	:= ( cNewCnt <> cLastCnt )
		EndIF
	EndIF
Next nLoop

IF ( lGdPut )
	oGdRdj:Refresh()
EndIF

Return( NIL )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdv2RdjChg	 	 ЁAutorЁMarinaldo de JesusЁ Data Ё05/08/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁChange da GetDados Avaliados/Rede no Folder Avaliadores  	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080()													Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function Rdv2RdjChg( oGdRdv , oGdRdj , aRdjCols , lColsToAll )

Local aRdjCposPes
Local aRdjCposSrt

Local bColsToAll
Local bAllToCols

Local nRdvSvAt

DEFAULT lColsToAll	:= .F.

Begin Sequence

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁGaranto que o Ponteiro Estara no Final do Arquivo para que naoЁ
	ЁCarregue Conteudo Invalido nos Inicializadores Padroes        Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	PutFileInEof( "RDJ" )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁVerifica se Deve Transferir para do aCols para o aColsAll     Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF (;
			(;
				( Inclui );
				.or.;
				( Altera );
			);
		)		

		nRdvSvAt	:= oGdRdv:oBrowse:nAt

		IF (;
				!Empty( __nRdvAtAnt );
				.and.;
				( __nRdvAtAnt <> nRdvSvAt );
			)	
			
			oGdRdv:Goto( __nRdvAtAnt )

			IF !( oGdRdj:TudoOk() )
				oGdRdj:oBrowse:SetFocus()
				oGdRdv:Refresh()
				Break
			EndIF

			If Type('oGdRdv:aCols[__nRdvAtAnt]') == "U"
				lColsToAll	:= .F.
			Else
				lColsToAll	:= .T.
			EndIf

		EndIF

		IF ( lColsToAll )

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			ЁObtem as Informacoes para o GdColsExChange para o Rdj         Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			RdjInfTrf(	oGdRdv			,;
						oGdRdj			,;
						@aRdjCposPes	,;
						@aRdjCposSrt	,;
						@bColsToAll		,;
						@bAllToCols		 ;
				  )
	
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			ЁTransfiro os Dados do aCols para o aColsAll				   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			GdColsExChange(	@aRdjCols		,;	//01 -> Array com a Estrutura do aCols Contendo todos os Dados
							@oGdRdj:aCols 	,;	//02 -> Array com a Estrutura do aCols Contendo Dados Especificos
							oGdRdj:aHeader	,;	//03 -> Array com a Estrutura do aHeader Contendo Informacoes dos Campos
							NIL				,;	//04 -> Array com as Posicoes dos Campos para Pesquisa
							NIL				,;	//05 -> Chave para Busca no aColsAll para Carga do aCols
							aRdjCposSrt		,;	//06 -> Array com as Posicoes dos Campos para Ordenacao
							aRdjCposPes		,;	//07 -> Array com as Posicoes dos Campos e Chaves para Pesquisa
							NIL				,;	//08 -> Array com a Estrutura do aHeaderAll Contendo Informacoes dos Campos
							.T.				,;	//09 -> Conteudo do Elemento "Deleted" a ser Carregado na Remontagem dos aCols
							.T.				,;	//10 -> Se deve Transferir do aCols para o aColsAll
							.F.				,;	//11 -> Se deve Transferir do aColsAll para o aCols
							.T.				,;	//12 -> Se Existe o Elemento de Delecao no aCols
							.T.				,;	//13 -> Se deve Carregar os Inicializadores padroes
							bColsToAll		,;	//14 -> Condicao para a Transferencia do aCols para o aColsAll
							bAllToCols		 ;	//15 -> Condicao para a Transferencia do aColsAll para o aCols
						 )

		EndIF
		
		IF ( __nRdvAtAnt <> nRdvSvAt )

			oGdRdv:Goto( nRdvSvAt )

			__nRdvAtAnt := nRdvSvAt

		EndIF

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁObtem as Informacoes para o GdColsExChange para o Rdj         Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		RdjInfTrf(	oGdRdv			,;
					oGdRdj			,;
					@aRdjCposPes	,;
					@aRdjCposSrt	,;
					@bColsToAll		,;
					@bAllToCols		 ;
			 	 )

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁTransfiro os Dados do aColsAll para o aCols				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		GdColsExChange(	@aRdjCols		,;	//01 -> Array com a Estrutura do aCols Contendo todos os Dados
						@oGdRdj:aCols 	,;	//02 -> Array com a Estrutura do aCols Contendo Dados Especificos
						oGdRdj:aHeader	,;	//03 -> Array com a Estrutura do aHeader Contendo Informacoes dos Campos
						NIL				,;	//04 -> Array com as Posicoes dos Campos para Pesquisa
						NIL				,;	//05 -> Chave para Busca no aColsAll para Carga do aCols
						aRdjCposSrt		,;	//06 -> Array com as Posicoes dos Campos para Ordenacao
						aRdjCposPes		,;	//07 -> Array com as Posicoes dos Campos e Chaves para Pesquisa
						NIL				,;	//08 -> Array com a Estrutura do aHeaderAll Contendo Informacoes dos Campos
						.T.				,;	//09 -> Conteudo do Elemento "Deleted" a ser Carregado na Remontagem dos aCols
						.F.				,;	//10 -> Se deve Transferir do aCols para o aColsAll
						.T.				,;	//11 -> Se deve Transferir do aColsAll para o aCols
						.T.				,;	//12 -> Se Existe o Elemento de Delecao no aCols
						.T.				,;	//13 -> Se deve Carregar os Inicializadores padroes
						bColsToAll		,;	//14 -> Condicao para a Transferencia do aCols para o aColsAll
						bAllToCols		 ;	//15 -> Condicao para a Transferencia do aColsAll para o aCols
					 )

	Else

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁObtem as Informacoes para o GdColsExChange para o Rdj         Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		RdjInfTrf(	oGdRdv			,;
					oGdRdj			,;
					@aRdjCposPes	,;
					@aRdjCposSrt	,;
					@bColsToAll		,;
					@bAllToCols		 ;
			 	 )
		
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁTransfiro os Dados do aColsAll para o aCols				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		GdColsExChange(	@aRdjCols		,;	//01 -> Array com a Estrutura do aCols Contendo todos os Dados
						@oGdRdj:aCols 	,;	//02 -> Array com a Estrutura do aCols Contendo Dados Especificos
						oGdRdj:aHeader	,;	//03 -> Array com a Estrutura do aHeader Contendo Informacoes dos Campos
						NIL				,;	//04 -> Array com as Posicoes dos Campos para Pesquisa
						NIL				,;	//05 -> Chave para Busca no aColsAll para Carga do aCols
						aRdjCposSrt		,;	//06 -> Array com as Posicoes dos Campos para Ordenacao
						aRdjCposPes		,;	//07 -> Array com as Posicoes dos Campos e Chaves para Pesquisa
						oGdRdj:aHeader	,;	//08 -> Array com a Estrutura do aHeaderAll Contendo Informacoes dos Campos
						.T.				,;	//09 -> Conteudo do Elemento "Deleted" a ser Carregado na Remontagem dos aCols
						.F.				,;	//10 -> Se deve Transferir do aCols para o aColsAll
						.T.				,;	//11 -> Se deve Transferir do aColsAll para o aCols
						.T.				,;	//12 -> Se Existe o Elemento de Delecao no aCols
						.T.				,;	//13 -> Se deve Carregar os Inicializadores padroes
						bColsToAll		,;	//14 -> Condicao para a Transferencia do aCols para o aColsAll
						bAllToCols		 ;	//15 -> Condicao para a Transferencia do aColsAll para o aCols
					 )
	EndIF
	
	oGdRdj:Goto( 1 )
	oGdRdj:Refresh()

End Sequence

Return( NIL )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjInfTrf		 ЁAutorЁMarinaldo de JesusЁ Data Ё05/08/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁMonta as informacoes que serao utilizadas para a  transferenЁ
Ё          Ёcia de informacoes no GdColsExChange do RDJ                 Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080()													Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdjInfTrf(	oGdRdv		,;
							oGdRdj		,;
							aRdjCposPes	,;
							aRdjCposSrt	,;
							bColsToAll	,;
							bAllToCols	 ;
				  		)

Local cRdvCodObj		:= GdFieldGet( "RDV_CODOBJ" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
Local cRdvCodPer		:= GdFieldGet( "RDV_CODPER" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
Local cRdvCodDor		:= GdFieldGet( "RDV_CODDOR" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )	

Local nRdjCodObj		:= GdFieldPos( "RDJ_CODOBJ"	, oGdRdj:aHeader )
Local nRdjPeriod  		:= GdFieldPos( "RDJ_PERIOD"	, oGdRdj:aHeader )
Local nRdjItem			:= GdFieldPos( "RDJ_ITEM"	, oGdRdj:aHeader )
Local nRdjSeqItm		:= GdFieldPos( "RDJ_SEQITM"	, oGdRdj:aHeader )
Local nRdjStatus		:= GdFieldPos( "RDJ_STATUS"	, oGdRdj:aHeader )
Local nRdjCodDor		:= GdFieldPos( "RDJ_CODDOR"	, oGdRdj:aHeader )
Local nRdjEscRea		:= GdFieldPos( "RDJ_ESCREA"	, oGdRdj:aHeader )
Local nRdjEscAtg		:= GdFieldPos( "RDJ_ESCATG"	, oGdRdj:aHeader )
Local nRdjEscCon		:= GdFieldPos( "RDJ_ESCCON"	, oGdRdj:aHeader )
Local nRdjDtIni			:= GdFieldPos( "RDJ_DTINI"	, oGdRdj:aHeader )
Local nRdjDtFim			:= GdFieldPos( "RDJ_DTFIM"	, oGdRdj:aHeader )
Local nRdjGhostCol		:= GdFieldPos( "GHOSTCOL"	, oGdRdj:aHeader )

Local cRdiEscRel
Local cRdiEscAtg
Local cRdiEscCon

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁSeta as Escalas Conforme Codigo do Objetivo      		  	  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
RdiSetEscalas( oGdRdv , @cRdiEscRel , @cRdiEscAtg , @cRdiEscCon )

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁCarrega Array a Posicao dos Campos para o "Sort"			  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
aRdjCposSrt := {}
aAdd( aRdjCposSrt	, nRdjCodObj 	)
aAdd( aRdjCposSrt	, nRdjPeriod 	)
aAdd( aRdjCposSrt	, nRdjCodDor 	)
aAdd( aRdjCposSrt	, nRdjItem   	)
aAdd( aRdjCposSrt	, nRdjSeqItm   	)
aAdd( aRdjCposSrt	, nRdjStatus 	)
IF ( nRdjGhostCol > 0 )
	aAdd( aRdjCposSrt	, nRdjGhostCol	)
EndIF

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁCarrega Array com a Posicao dos Campos e as Chaves  CorresponЁ
Ёdentes														  Ё	
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
aRdjCposPes := {}
aAdd( aRdjCposPes  	, { nRdjCodObj	, cRdvCodObj } )
aAdd( aRdjCposPes  	, { nRdjPeriod	, cRdvCodPer } )
aAdd( aRdjCposPes  	, { nRdjCodDor	, cRdvCodDor } )
aAdd( aRdjCposPes  	, { nRdjEscRea	, cRdiEscRel } )
aAdd( aRdjCposPes  	, { nRdjEscAtg	, cRdiEscAtg } )
aAdd( aRdjCposPes  	, { nRdjEscCon	, cRdiEscCon } )

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁDefine os Blocos para Validacao da Transferencia do aCols  paЁ
Ёra o aColsAll												  Ё 
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
bColsToAll	:= { | aCols , aHeader , nItem |; 
												!Empty( aCols[ nItem , nRdjCodObj ] );
												.and.;
												!Empty( aCols[ nItem , nRdjPeriod ] );
												.and.;
												!Empty( aCols[ nItem , nRdjItem   ] );
												.and.;
												!Empty( aCols[ nItem , nRdjSeqItm ] );
												.and.;
												!Empty( aCols[ nItem , nRdjCodDor ] );
												.and.;
												!Empty( aCols[ nItem , nRdjDtIni  ] );
												.and.;
												!Empty( aCols[ nItem , nRdjDtFim  ] );
												.and.;
												!Empty( aCols[ nItem , nRdjEscRea  ] );
												.and.;
												!Empty( aCols[ nItem , nRdjEscAtg  ] );
			   }

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁDefine os Blocos para Validacao da Transferencia do  aColsAllЁ
Ёparara o aColsAll											  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
bAllToCols	:= { | aColsAll , aHeaderAll , nFindKey |;
														!Empty( aColsAll[ nFindKey , nRdjCodObj ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjPeriod ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjItem ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjSeqItm ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjCodDor ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjDtIni ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjDtFim ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjEscRea  ] );
														.and.;
														!Empty( aColsAll[ nFindKey , nRdjEscAtg  ] );
			   }

Return( NIL )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdiSetEscalas 	 ЁAutorЁMarinaldo de JesusЁ Data Ё05/08/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁSeta as Escalas Conforme Codigo do Projeto               	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080()													Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdiSetEscalas( oGdRdv , cRdiEscRel , cRdiEscAtg , cRdiEscCon, cCodObj )

Local cRdiFilial := xFilial( "RDI" , xFilial( "RDV" ) )
Local cRdvCodObj := Iif(!Empty(cCodObj), cCodObj, GdFieldGet( "RDV_CODOBJ" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )) 
Local lRdiFound

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁPosiciona no Codigo de Objetivo Selecionado             	  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
lRdiFound := RDI->( MsSeek( cRdiFilial + cRdvCodObj , .F. ) )

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁObtem o Conteudo											  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
cRdiEscRel	:= RDI->RDI_ESCREL
cRdiEscAtg	:= RDI->RDI_ESCATG
cRdiEscCon	:= RDI->RDI_ESCCON

/*
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
ЁCarrega as Variaveis de Memoria                        	  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
SetMemVar( "RDI_ESCREL" , cRdiEscRel )
SetMemVar( "RDI_ESCATG" , cRdiEscAtg )
SetMemVar( "RDI_ESCCON" , cRdiEscCon )

Return( lRdiFound )

/*/
зддддддддддбддддддддддддбдддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvGdLinOk	ЁAutorЁMarinaldo de Jesus     Ё Data Ё18/06/2002Ё
цддддддддддеддддддддддддадддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁLinha Ok do Rdv                                             Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁRdvGdLinOk( oBrowse , lSetMemVar )						    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ 															Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvGdLinOk( oBrowse , lSetMemVar )

Local lLinOk		:= .T.

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Altera o Estado do Cursor  								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

	Begin Sequence

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Se a Linha da GetDados Nao Estiver Deletada				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		IF !( GdDeleted() )
		
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Verifica Itens Duplicados na GetDados						   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aCposKey := GetArrUniqe( "RDV" )
			IF !( lLinOk := GdCheckKey( aCposKey , 4 ) )
				Break
			EndIF

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Verifica Se o Campos Estao Devidamente Preenchidos		   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aCposKey := GdObrigat( aHeader )
			IF !( lLinOk := GdNoEmpty( aCposKey ) )
		    	Break
			EndIF

		EndIF

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁReinicializa as Variaveis de Memoria                          Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		DEFAULT lSetMemVar := .T.
		IF ( lSetMemVar )
			SetMemVar( "RDV_CODOBJ" , Space( GetSx3Cache( "RDV_CODOBJ" , "X3_TAMANHO" ) ) ) 
			SetMemVar( "RDV_CODPER" , Space( GetSx3Cache( "RDV_CODPER" , "X3_TAMANHO" ) ) )
			SetMemVar( "RDV_CODDOR" , Space( GetSx3Cache( "RDV_CODDOR" , "X3_TAMANHO" ) ) )
		EndIF        

	End Sequence
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁSe Houver Alguma Inconsistencia na GetDados, Seta-lhe o Foco  Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( lLinOk )
		oBrowse:SetFocus()
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁGaranto que o Ponteiro Estara no Final do Arquivo para que naoЁ
	ЁCarregue Conteudo Invalido nos Inicializadores Padroes        Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	PutFileInEof( "RDV" )

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Restaura o Estado do Cursor								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()
	
Return( lLinOk )

/*/
зддддддддддбддддддддддддбдддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvGdTudOk	ЁAutorЁMarinaldo de Jesus     Ё Data Ё18/06/2002Ё
цддддддддддеддддддддддддадддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁTudo Ok do Rdv                                              Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁRdvGdTudOk( oBrowse )									    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ 															Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvGdTudOk( oBrowse )

Local lTudoOk := .T.

Local nLoop

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Altera o Estado do Cursor  								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

	Begin Sequence
	
	    /*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Percorre Todas as Linhas para verificar se Esta Tudo OK      Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		For nLoop := 1 To Len( aCols )
			n := nLoop
			IF !( lTudoOk := RdvGdLinOk( oBrowse ) )
				oBrowse:Refresh()
				Break
			EndIF
		Next nLoop
	
	End Sequence

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Restaura o Estado do Cursor								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()

Return( lTudoOk  )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvChkChgF   ЁAutorЁMarinaldo de Jesus    Ё Data Ё06/08/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁVerifica se Pode Efetuar Modificacoes em Campos do RDV      Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<vide parametros formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdvChkChgF()

Local lChkModRdv := .T.

IF (;
		( Type( "aRdjCols" ) == "A" );
		.and.;
		( Type( "oGdRdj" ) == "O" );
	)	
	//"Existem Itens ja aprovados para este Objetivo. Este campo nДo poderА ser alterado."
	lChkModRdv := RdvGdDelOk( 4 , aRdjCols , oGdRdj , .T. , .F. , STR0033 )
EndIF

Return( lChkModRdv )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvGdDelOk   ЁAutorЁMarinaldo de Jesus    Ё Data Ё18/07/2003Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValidar a Delecao na GetDados RDV                           Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<vide parametros formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<vide parametros formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdvGdDelOk( nOpc , aRdjCols , oGdRdj , lNoChkFirst , lExecDel , cMsgInfo )
         
Local lDelOk 		:= .T.
Local lStatusDel	:= .F.

Local aRdjColPos
Local bRdjAscan
Local cRdvCodObj
Local cRdvCodPer
Local nRdjCodObj
Local nRdjPeriod
Local nRdjCodDor
Local nRdjStatus
Local nRdjDeleted
Local nRdjNoDele

Static lFirstDelOk
Static lLstDelOk

DEFAULT lFirstDelOk	:= .T.
DEFAULT lLstDelOk	:= .T.
DEFAULT lNoChkFirst	:= .F.
DEFAULT lExecDel	:= .T.	

Begin Sequence

	//Quando for Visualizacao ou Exclusao Abandona
	IF (;
			( nOpc == 2 ) .or. ;	//Visualizacao
			( nOpc == 5 );			//Exclusao
		)
		Break
	EndIF

	IF !( lNoChkFirst )
		//Apenas se for a primeira vez
		IF !( lFirstDelOk )
			lFirstDelOk	:= .T.
			lDelOk 		:= lLstDelOk
			lLstDelOk	:= .T.
			Break
		EndIF
	Else
		lFirstDelOk := .T.
	EndIF   

	lStatusDel	:= !( GdDeleted() ) //Inverte o Estado
	
	cRdvCodObj	:= GdFieldGet( "RDV_CODOBJ" )
	cRdvCodPer	:= GdFieldGet( "RDV_CODPER" )
	cRdvCodDor	:= GdFieldGet( "RDV_CODDOR" )

	nRdjCodObj	:= GdFieldPos( "RDJ_CODOBJ" , oGdRdj:aHeader )
	nRdjPeriod	:= GdFieldPos( "RDJ_PERIOD" , oGdRdj:aHeader )
	nRdjCodDor	:= GdFieldPos( "RDJ_CODDOR" , oGdRdj:aHeader )
	nRdjStatus	:= GdFieldPos( "RDJ_STATUS" , oGdRdj:aHeader )
	nRdjDeleted	:= GdFieldPos( "GDDELETED"	, oGdRdj:aHeader )

	aRdjColPos := {;
						{ nRdjCodObj , nRdjPeriod, nRdjCodDor },;
						{ cRdvCodObj , cRdvCodPer, cRdvCodDor },;
						nRdjDeleted;
    			  }

	IF ( lStatusDel )	//Deletar
        
		bRdjAscan	:= { |x| ( x[ nRdjCodObj ] == cRdvCodObj );	//Codigo do Objetivo
							  .and.;                            	
							  ( x[ nRdjPeriod ] == cRdvCodPer );	//Codigo do Periodo
							  .and.;                                                  
  							  ( x[ nRdjCodDor ] == cRdvCodDor );	//Codigo do Avaliador
							  .and.;
							  ( x[ nRdjStatus ] $ "23" );			//2=Aprovado;3=Aprovado com Pendencia
							  .and.;
							  !x[ nRdjDeleted ];					//Registro Nao Deletado
						}

		IF ( ( nRdjNoDele := aScan( aRdjCols , bRdjAscan ) ) == 0 )
			nRdjNoDele := aScan( oGdRdj:aCols , bRdjAscan )
		EndIF

		lDelOk		:= ( nRdjNoDele == 0 )
    	lLstDelOk	:= lDelOk
    	IF ( lDelOk ) 
    		IF ( lExecDel )
    			GdDelItens( @aRdjCols		, aRdjColPos )
    			GdDelItens( @oGdRdj:aCols	, aRdjColPos )
    			oGdRdj:oBrowse:Refresh()
    		EndIF
    	Else
    		DEFAULT cMsgInfo := STR0027	//"Existem Itens jА aprovados para este Objetivo. Este registro nЦo serА deletado."
    		MsgInfo( OemToAnsi( cMsgInfo ) , cCadastro )
    	EndIF
		//Ja Passou pela funcao
		lFirstDelOk := .F.
    	Break
	
	Else				//Restaurar

		IF ( lExecDel )
			GdRstItens( @aRdjCols		, aRdjColPos )
			GdRstItens( @oGdRdj:aCols	, aRdjColPos )
   			oGdRdj:oBrowse:Refresh()
   		EndIF	

   		lLstDelOk := lDelOk
		//Ja Passou pela funcao
		lFirstDelOk := .F.
    	Break
	
	EndIF

	//Ja Passou pela funcao
	lFirstDelOk := .F.

End Sequence
	
Return( lDelOk )

/*/
зддддддддддбддддддддддддбдддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjGdLinOk	ЁAutorЁMarinaldo de Jesus     Ё Data Ё18/06/2002Ё
цддддддддддеддддддддддддадддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁLinha Ok do RDJ                                             Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁRdjGdLinOk( oBrowse )									    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ 															Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjGdLinOk( oBrowse )

Local aCposKey		:= {}
Local lLinOk		:= .T.

Local cRdjPeriod
Local dRdjDtIni
Local dRdjDtFim
Local dRduDatIni
Local dRduDatFim

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Altera o Estado do Cursor  								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

	Begin Sequence
	
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Se a Linha da GetDados Nao Estiver Deletada				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		IF !( GdDeleted() )
		
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Verifica Itens Duplicados na GetDados						   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aCposKey := GetArrUniqe( "RDJ" )
			IF !( lLinOk := GdCheckKey( aCposKey , 4 ) )
				Break
			EndIF

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Verifica Se o Campos Estao Devidamente Preenchidos		   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aCposKey := GdObrigat( aHeader )
		   
			//-- Se Existir Tipo do Curso no Topico (item de objetivo) exige que seja informado o Curso
			IF !( EMPTY(GdFieldGet("RDJ_TPCURS") ) )
				AADD(aCposKey,"RDJ_CURSO")
		    Endif 
		    
			IF !( lLinOk := GdNoEmpty( aCposKey ) )
		    	Break
			EndIF
	         
	       	    
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Obtem o Codigo do Periodo                                    Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			cRdjPeriod	:= GdFieldGet("RDJ_PERIOD")
			RDU->( dbSetOrder( RetOrdem( "RDU" , "RDU_FILIAL+RDU_CODIGO" ) ) )
			IF !( lLinOk := ( RDU->( MsSeek( xFilial( "RDU" ) + cRdjPeriod , .F. ) ) ) )
				//"O PerМodo Informado И invАlido. Selecione um perМodo que exista no Cadastro de PerМodos""###"Aviso de Inconsist┬ncia"
				MsgInfo( OemToAnsi( STR0023 ) , OemToAnsi( STR0010 ) )
				Break
			EndIF
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Obtem o PerМodo do RDU                                       Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			dRduDatIni := RDU->RDU_DATINI
			dRduDatFim := RDU->RDU_DATFIM

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Obtem as Datas Iniciais e Finais                             Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			dRdjDtIni	:= GdFieldGet("RDJ_DTINI")
			dRdjDtFim	:= GdFieldGet("RDJ_DTFIM")

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Verifica Se o Data Inicial eh Maior que Data Final		   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			IF !( lLinOk := ( dRdjDtIni <= dRdjDtFim ) )
		    	//"A Data Inicial n└o pode ser maior que a Data Final"###"Aviso de Inconsist┬ncia"
		    	MsgInfo( OemToAnsi( STR0032 ) , OemToAnsi( STR0010 ) )
		    	Break
			EndIF

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Verifica Se o Data Inicial e Final estao Dentro do Periodo deЁ
			Ё finido para os Objetivos									   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			IF !( lLinOk := ( ( dRdjDtIni >= dRduDatIni ) .and. ( dRdjDtFim <= dRduDatFim ) ) )
		    	IF ( dRdjDtIni < dRduDatIni )
		    		//"Data Inicial Menor que Data Inicial do PerМodo"###"PerМodo:"###"Aviso de Inconsist┬ncia"
		    		MsgInfo( OemToAnsi( STR0011 ) + CRLF + STR0024 + " " + Dtoc( dRduDatIni ) + " / " + Dtoc( dRduDatFim ) , OemToAnsi( STR0010 ) )
		    	ElseIF ( dRdjDtIni > dRduDatFim )
		    		//"Data Inicial Maior que Data Final do PerМodo"###"PerМodo:"###"Aviso de Inconsist┬ncia"
		    		MsgInfo( OemToAnsi( STR0025 ) + CRLF + STR0024 + " " + Dtoc( dRduDatIni ) + " / " + Dtoc( dRduDatFim ) , OemToAnsi( STR0010 ) )
		    	ElseIF ( dRdjDtFim > dRduDatFim )
		    		//"Data Final Maior que Data Final do PerМodo"###"PerМodo:"###"Aviso de Inconsist┬ncia"
		    		MsgInfo( OemToAnsi( STR0012 ) + CRLF + STR0024 + " " + Dtoc( dRduDatIni ) + " / " + Dtoc( dRduDatFim ) , OemToAnsi( STR0010 ) )
		    	ElseIF ( dRdjDtFim < dRduDatIni )
		    		//"Data Final Menor que Data Inicial do PerМodo"###"PerМodo:"###"Aviso de Inconsist┬ncia"
		    		MsgInfo( OemToAnsi( STR0026 ) + CRLF + STR0024 + " " + Dtoc( dRduDatIni ) + " / " + Dtoc( dRduDatFim ) , OemToAnsi( STR0010 ) )
		    	EndIF
		    	Break
			EndIF

		EndIF
		
	End Sequence
	
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁSe Houver Alguma Inconsistencia na GetDados, Seta-lhe o Foco  Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( lLinOk )
		IF ( ValType( "oBrowse" ) == "O" )
			oBrowse:SetFocus()
		EndIF	
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	ЁGaranto que o Ponteiro Estara no Final do Arquivo para que naoЁ
	ЁCarregue Conteudo Invalido nos Inicializadores Padroes        Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	PutFileInEof( "RDJ" )

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Restaura o Estado do Cursor								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()
	
Return( lLinOk )

/*/
зддддддддддбддддддддддддбдддддбдддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjGdTudOk	ЁAutorЁMarinaldo de Jesus     Ё Data Ё18/06/2002Ё
цддддддддддеддддддддддддадддддадддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁTudo Ok do RDJ                                              Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁRdjGdTudOk( oBrowse )									    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ 															Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjGdTudOk( oBrowse )

Local lTudoOk := .T.

Local nLoop

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Altera o Estado do Cursor  								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

	Begin Sequence
	
	    /*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Percorre Todas as Linhas para verificar se Esta Tudo OK      Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		For nLoop := 1 To Len( aCols )
			n := nLoop
			IF !( lTudoOk := RdjGdLinOk( oBrowse ) )
				IF ( ValType( "oBrowse" ) == "O" )
					oBrowse:Refresh()
				EndIF	
				Break
			EndIF
		Next nLoop
	
	End Sequence

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Restaura o Estado do Cursor								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()

Return( lTudoOk  )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjGdDelOk   ЁAutorЁMarinaldo de Jesus    Ё Data Ё18/07/2003Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValidar a Delecao na GetDados RDJ                           Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   ЁRdjGdDelOk( nOpc , oGdRdv )									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ 															Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function RdjGdDelOk( nOpc , oGdRdv , lNoChkFirst , lShowMsg )
         
Local lDelOk 		:= .T.
Local lStatusDel	:= .F.

Static lFirstDelOk
Static lLstDelOk

DEFAULT lFirstDelOk	:= .T.
DEFAULT lLstDelOk	:= .T.

DEFAULT lNoChkFirst	:= .F.
DEFAULT lShowMsg	:= .T.

Begin Sequence

	//Quando for Visualizacao ou Exclusao Abandona
	IF (;
			( nOpc == 2 ) .or. ;	//Visualizacao
			( nOpc == 5 );			//Exclusao
		)
		Break
	EndIF

	IF !( lNoChkFirst )
		//Apenas se for a primeira vez
		IF !( lFirstDelOk )
			lFirstDelOk	:= .T.
			lDelOk 		:= lLstDelOk
			lLstDelOk	:= .T.
			Break
		EndIF
	Else
		lFirstDelOk := .T.
	EndIF

	lStatusDel	:= !( GdDeleted() ) //Inverte o Estado
	
	IF ( lStatusDel )	//Deletar
   		lDelOk := !( GdFieldGet( "RDJ_STATUS" ) $ "23" )
   		IF !( lDelOk )
   			IF ( lShowMsg )
   				//"Este Item jА estА com a SituaГЦo de Aprovado e nЦo pode ser deletado."
   				MsgInfo( STR0028 , cCadastro )
   			EndIF	
   		EndIF
   		lLstDelOk := lDelOk
		//Ja Passou pela funcao
		lFirstDelOk := .F.
   		Break
	Else				//Restaurar
    	lDelOk := !GdFieldGet( "GDDELETED" , oGdRdv:oBrowse:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
    	IF !( lDelOk )
    		IF ( lShowMsg )
    			//"Este Item nЦo pode ser restaurado. Restaure Primeiro o Objetivo no Folder Objetivos."
    			MsgInfo( STR0029 , cCadastro )
    		EndIF	
    	EndIF
   		lLstDelOk := lDelOk
		//Ja Passou pela funcao
		lFirstDelOk := .F.
   		Break
	EndIF

	//Ja Passou pela funcao
	lFirstDelOk := .F.

End Sequence
	
Return( lDelOk )

/*/
зддддддддддбддддддддддддддддбдддддбдддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjNumGhostCol	ЁAutorЁMarinaldo de Jesus Ё Data Ё28/07/2004Ё
цддддддддддеддддддддддддддддадддддадддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao de Inicializacao da Numeracao Automatica do GHOSTCOL Ё
Ё          Ёdo RDJ														Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA080  	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjNumGhostCol()

Local cNumGhostCol
	
Begin Sequence
	
	IF IsInGetDados( { "GHOSTCOL" } )
		cNumGhostCol := GdNumItem( "GHOSTCOL" , NIL , 1 )
		Break
	EndIF
	
	IF (;
			( Type( "aRdjHeader" ) == "A" );
			.and.;
			( Type( "aRdjCols" ) == "A" );
			.and.;
			( GdFieldPos( "GHOSTCOL" , aRdjHeader ) > 0 );
		)	
		IF ( Type( "cRdjNumGhostCol" ) == "U" )
			Private cRdjNumGhostCol := ""
		EndIF
		cNumGhostCol	:= GdNumItem( "GHOSTCOL" , @cRdjNumGhostCol , NIL , aRdjHeader , aRdjCols )
		Break
	EndIF
	
	DEFAULT cNumGhostCol := GdNumItem( "GHOSTCOL" , @cRdjNumGhostCol , NIL ) 
	
End Sequence

Return( cNumGhostCol )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100Grava ЁAutorЁMarinaldo de Jesus    Ё Data Ё21/07/2003Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o Ё                                                            Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100()	                                                Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Static Function Apda100Grava(	nOpc		,;	//Opcao de Acordo com aRotina
							 	nReg		,;	//Numero do Registro do Arquivo Pai ( RD0 )
							 	aRdvHeader	,;	//Campos do Arquivo Filho ( RDV )
							 	aRdvCols	,;	//Itens Atual do Arquivo Filho ( RDV )
							 	aSvRdvCols	,;	//Itens Anteriores do Arquivo Filho ( RDV )
							 	aRdvVirtGd	,;	//Campos Virtuais do Arquivo Filho ( RDV )
							 	aRdvRecnos	,;	//Recnos do Arquivo Filho ( RDV )
		 						aRdvMemoGd	,;	//Campos Memo ( RDV )
							 	aRdjHeader	,;	//Campos do Arquivo de Sub-Itens ( RDJ )
							 	aRdjCols	,;	//Sub-Itens Atuis do Arquivo de Sub-Itens ( RDJ )
							 	aSvRdjCols	,;	//Sub-Itens Anteriores do Arquivo de Sub-Itens ( RDJ )
							 	aRdjVirtGd	,;	//Campos Virtuais do Arquivo de Sub-Itens ( RDJ )
							 	aRdjRecnos	,;	//Recnos do Arquivo de Sub-Itens ( RDJ )
							 	aRdjMemoGd	 ;	//Campos Memo na de Sub-Itens ( RDJ )
							  )

/*/
зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Variaveis de Inicializacao Obrigatoria					  Ё
юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Local aMestre	:= GdPutIStrMestre( 01 )
Local aItens	:= {}
Local cOpcao	:= IF( ( nOpc == 5 ) , "DELETE" , IF( ( ( nOpc == 3 ) .or. ( nOpc == 4 ) ) , "PUT" , NIL ) )
Local lModItens	:= .F.
Local lRdvModif	:= .F.
Local lRdvDelet	:= .F.
Local lRdjModif	:= .F.
Local lRdjDelet	:= .F.
Local lSuperDel	:= .T.

Local aRdjColDel
Local aRdjRecDel
Local aRdvColDel
Local aRdvRecDel
Local nItens

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Altera o Estado do Cursor  								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorWait()

	IF ( cOpcao == "DELETE" )
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		ЁSimulo aqui uma Alteracao onde Todos os Itens Foram Deletados Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		cOpcao 		:= "PUT" 
		lSuperDel	:= .F.
		GdSuperDel( aRdvHeader , aRdvCols , NIL , .T. )
		GdSuperDel( aRdjHeader , aRdjCols , NIL , .T. )
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Verifica se Houveram Modificacoes no RDV					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( lRdvModif := !ArrayCompare( aRdvCols , aSvRdvCols ) )
		IF ( lSuperDel )
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Deleto todos os Itens que nao Estao OK					   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			GdSuperDel( aRdvHeader , @aRdvCols , NIL , .T. , GdGetBlock( "RDV" , aRdvHeader , .F. ) ) 
		EndIF	
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Separa os Itens que foram Deletados     					   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		lRdvDelet := GdSplitDel( aRdvHeader , @aRdvCols , @aRdvRecnos , @aRdvColDel , @aRdvRecDel  )
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Verifica se Houveram Modificacoes no RDJ					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( lRdjModif := !ArrayCompare( aRdjCols , aSvRdjCols ) )
		IF ( lSuperDel )
			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Deleto todos os Itens que nao Estao OK					   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			GdSuperDel( aRdjHeader , @aRdjCols , NIL , .T. , GdGetBlock( "RDJ" , aRdjHeader , .F. ) )
		EndIF
		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Separa os Itens que foram Deletados     					   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		lRdjDelet := GdSplitDel( aRdjHeader , @aRdjCols , @aRdjRecnos , @aRdjColDel , @aRdjRecDel  )
	EndIF

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Verifica se eh Delecao ou se Houveram Modificacoes       	   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	lModItens := ( ( lRdvModif ) .or. ( lRdjModif ) )

	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega os Itens Apenas se Houveram Alteracoes ou na ExclusaoЁ
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF ( lModItens )

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Carrega as Informacoes deletadas RDJ                   	   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		IF ( lRdjDelet )

			aAdd( aItens , GdPutIStrItens() )
			nItens := Len( aItens )
		
			aItens[ nItens , 01 ] := "RDJ"
			aItens[ nItens , 02 ] := NIL
			aItens[ nItens , 03 ] := aClone( aRdjHeader )
			aItens[ nItens , 04 ] := aClone( aRdjColDel )
			aItens[ nItens , 05 ] := aClone( aRdjVirtGd )
			aItens[ nItens , 06 ] := aClone( aRdjRecDel )
			aItens[ nItens , 07 ] := aClone( aRdjMemoGd )
			aItens[ nItens , 08 ] := NIL
			aItens[ nItens , 09 ] := NIL
			aItens[ nItens , 10 ] := "RDY"

		EndIF

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Carrega as Informacoes deletadas RDV                   	   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		IF ( lRdvDelet )

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Carrega as Informacoes do RDV                   			   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aAdd( aItens , GdPutIStrItens() )
			nItens := Len( aItens )
		
			aItens[ nItens , 01 ] := "RDV"
			aItens[ nItens , 02 ] := NIL
			aItens[ nItens , 03 ] := aClone( aRdvHeader )
			aItens[ nItens , 04 ] := aClone( aRdvColDel )
			aItens[ nItens , 05 ] := aClone( aRdvVirtGd )
			aItens[ nItens , 06 ] := aClone( aRdvRecDel )
			aItens[ nItens , 07 ] := aClone( aRdvMemoGd )
			aItens[ nItens , 08 ] := NIL
			aItens[ nItens , 09 ] := {}
			aItens[ nItens , 10 ] := "RDY"

		EndIF

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Se Ocorreram Alteracoes no RDV                   			   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		IF ( lRdvModif )

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Carrega as Informacoes do RDV                   			   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aAdd( aItens , GdPutIStrItens() )
			nItens := Len( aItens )
			
			aItens[ nItens , 01 ] := "RDV"
			aItens[ nItens , 02 ] := {;
										{ "FILIAL" , xFilial( "RDV" , xFilial( "RD0" ) ) },;
										{ "CODPAR" , GetMemVar( "RD0_CODIGO" ) };
						 		 	 }
			aItens[ nItens , 03 ] := aClone( aRdvHeader )
			aItens[ nItens , 04 ] := aClone( aRdvCols   )
			aItens[ nItens , 05 ] := aClone( aRdvVirtGd )
			aItens[ nItens , 06 ] := aClone( aRdvRecnos )
			aItens[ nItens , 07 ] := aClone( aRdvMemoGd )
			aItens[ nItens , 08 ] := NIL
			aItens[ nItens , 09 ] := {}
			aItens[ nItens , 10 ] := "RDY"
		
		EndIF

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Se Ocorreram Alteracoes no RDJ                   			   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		IF ( lRdjModif )

			/*/
			здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
			Ё Carrega as Informacoes do RDJ                   			   Ё
			юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
			aAdd( aItens , GdPutIStrItens() )
			nItens := Len( aItens )
			
			aItens[ nItens , 01 ] := "RDJ"
			aItens[ nItens , 02 ] := {;
										{ "FILIAL" , xFilial( "RDJ" , xFilial( "RD0" ) ) },;
										{ "CODPAR" , GetMemVar( "RD0_CODIGO" ) };
						 		 	 }
			aItens[ nItens , 03 ] := aClone( aRdjHeader )
			aItens[ nItens , 04 ] := aClone( aRdjCols   )
			aItens[ nItens , 05 ] := aClone( aRdjVirtGd )
			aItens[ nItens , 06 ] := aClone( aRdjRecnos )
			aItens[ nItens , 07 ] := aClone( aRdjMemoGd )
			aItens[ nItens , 08 ] := NIL
			aItens[ nItens , 09 ] := NIL
			aItens[ nItens , 10 ] := "RDY"

		EndIF

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Define as Informacoes para o Arquivo Mestre RD0			   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		aMestre[ 01 , 01 ]	:= "RD0"
		aMestre[ 01 , 02 ]	:= nReg
		aMestre[ 01 , 03 ]	:= .F.
		aMestre[ 01 , 04 ]	:= {}
		aMestre[ 01 , 05 ]	:= {}
		aMestre[ 01 , 06 ]	:= {}
		aMestre[ 01 , 07 ]	:= aClone( aItens )
		aMestre[ 01 , 08 ]	:= "RDY"

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Grava as Informacoes                        				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		GdPutInfoData( aMestre , cOpcao , .F. , .F.  )

		/*/
		здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
		Ё Confirmando a Numeracao Automatica          				   Ё
		юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
		While ( GetSX8Len() > nGetSX8Len )
			ConfirmSX8()
		End While

	EndIF

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Restaura o Estado do Cursor								   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
CursorArrow()

Return( NIL )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvCodParVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё04/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDV_CODPAR									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDV_CODPAR									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvCodParVld()

Local lRdvCodParVld	:= .T.

Begin Sequence

	IF !( lRdvCodParVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdvCodParVld := ExistCpo( "RD0" ) )
		Break
	EndIF

End Sequence

Return( lRdvCodParVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvCodObjVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё04/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDV_CODOBJ									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDV_CODOBJ									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvCodObjVld()

Local lRdvCodObjVld	:= .T.

Local bSortaCols

Local cLstCodObj
Local cNewCodObj
Local cRdiEscRel
Local cRdiEscAtg
Local cRdiEscCon
Local cRdjItEsCr
Local cRdjItEsAt
Local cRdjItAtCn
Local cRdjItECoA
Local cRdjItECoP

Local cRdjDescRe
Local cRdjDescAt
Local cRdjDitCon
Local cRdjDescCo

Local lCodObjChj

Local nRdjCodObj
Local nRdjPeriod
Local nRdjCodDor
Local nRdjItem
Local nRdjSeqItm
Local nRdjEscRea
Local nRdjEscAtg
Local nRdjEscCon
Local nRdjItEsCr
Local nRdjItAtCn
Local nRdjItEsAt
Local nRdjItECoA
Local nRdjItECoP
Local nRdjGhostCol
Local nPosCodObj

Local nRdjDescRe
Local nRdjDescAt
Local nRdjDitCon
Local nRdjDescCo

Local oRdvBrowse

Begin Sequence

	IF !( lRdvCodObjVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdvCodObjVld := ExistCpo( "RDI" ) )
		Break
	EndIF

	IF IsInGetDados( { "RDV_CODOBJ" } )
		
		lCodObjChj	:= ( ( cLstCodObj	:= GdFieldGet( "RDV_CODOBJ" ) ) <> ( cNewCodObj := GetMemVar( "RDV_CODOBJ" ) ) )
		IF ( lCodObjChj )
			IF !Empty( cLstCodObj )
				IF !( lRdvCodObjVld := RdvChkChgF() )
					Break
				EndIF
				IF ( Type( "oGdRdv" ) == "O" )
					oRdvBrowse := oGdRdv:oBrowse
				EndIF
				GdFieldPut( "RDV_CODOBJ" , cNewCodObj )
				IF !( lRdvCodObjVld := RdvGdLinOk( oRdvBrowse , .F. ) )
					GdFieldPut( "RDV_CODOBJ" , cLstCodObj )
					SetMemVar( "RDV_CODOBJ" , cLstCodObj )
					Break
				EndIF
				IF ( Type( "oGdRdv" ) == "O" )
					RdiSetEscalas( oGdRdv , @cRdiEscRel , @cRdiEscAtg , @cRdiEscCon )
				Else
					cRdiEscRel := GetMemVar( "RDI_ESCREL" )
					cRdiEscAtg := GetMemVar( "RDI_ESCATG" )
					cRdiEscCon := GetMemVar( "RDI_ESCCON" )
				EndIF
			EndIF
			bSortaCols	:= { |x,y| (;
										( x[ nRdjCodObj ] + x[ nRdjPeriod ] + x[ nRdjCodDor ] + x[ nRdjItem ] + x[ nRdjSeqItm ] );
										<;
										( y[ nRdjCodObj ] + y[ nRdjPeriod ] + y[ nRdjCodDor ]+ y[ nRdjItem ] + y[ nRdjSeqItm ] );
									);
							}
			bAscaCols	:= { |aColsElem| ( aColsElem[ nRdjCodObj ] == cLstCodObj ) }
			IF (;
					( Type( "aRdjHeader" ) == "A" );
					.and.;
					( Type( "aRdjCols" ) == "A" );
					.and.;
					( ( nRdjCodObj	:= GdFieldPos( "RDJ_CODOBJ" , aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjPeriod	:= GdFieldPos( "RDJ_PERIOD" , aRdjHeader ) ) > 0 );
					.and.;                                                             
					( ( nRdjCodDor	:= GdFieldPos( "RDJ_CODDOR" , aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjItem	:= GdFieldPos( "RDJ_ITEM"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjSeqItm  := GdFieldPos( "RDJ_SEQITM"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjEscRea	:= GdFieldPos( "RDJ_ESCREA"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjEscAtg	:= GdFieldPos( "RDJ_ESCATG"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjEscCon	:= GdFieldPos( "RDJ_ESCCON"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjItEsCr	:= GdFieldPos( "RDJ_ITESCR"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjItEsAt	:= GdFieldPos( "RDJ_ITESAT"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjItAtCn	:= GdFieldPos( "RDJ_ITATCN"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjItECoA	:= GdFieldPos( "RDJ_ITECOA"	, aRdjHeader ) ) > 0 );
					.and.;
					( ( nRdjItECoP	:= GdFieldPos( "RDJ_ITECOP"	, aRdjHeader ) ) > 0 );
				 )
				aSort( aRdjCols , NIL , NIL , bSortaCols )
				IF ( ( nPosCodObj := aScan( aRdjCols , bAscaCols ) ) > 0 )
					cRdjItEsCr	:= GetValType( GetSx3Cache( "RDJ_ITESCR" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITESCR" , "X3_TAMANHO" ) ) 
					cRdjItEsAt	:= GetValType( GetSx3Cache( "RDJ_ITESAT" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITESAT" , "X3_TAMANHO" ) ) 
					cRdjItAtCn	:= GetValType( GetSx3Cache( "RDJ_ITATCN" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITATCN" , "X3_TAMANHO" ) )
					cRdjItECoA	:= GetValType( GetSx3Cache( "RDJ_ITECOA" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITECOA" , "X3_TAMANHO" ) ) 
					cRdjItECoP	:= GetValType( GetSx3Cache( "RDJ_ITECOP" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITECOP" , "X3_TAMANHO" ) ) 
					While ( ( nPosCodObj := aScan( aRdjCols , bAscaCols , nPosCodObj ) ) > 0 )
						aRdjCols[ nPosCodObj , nRdjCodObj ] := cNewCodObj
						aRdjCols[ nPosCodObj , nRdjEscRea ] := cRdiEscRel
						aRdjCols[ nPosCodObj , nRdjEscAtg ] := cRdiEscAtg
						aRdjCols[ nPosCodObj , nRdjEscCon ] := cRdiEscCon
						aRdjCols[ nPosCodObj , nRdjItEsCr ] := cRdjItEsCr
						aRdjCols[ nPosCodObj , nRdjItEsAt ] := cRdjItEsAt
						aRdjCols[ nPosCodObj , nRdjItAtCn ] := cRdjItAtCn
						aRdjCols[ nPosCodObj , nRdjItECoA ] := cRdjItECoA
						aRdjCols[ nPosCodObj , nRdjItECoP ] := cRdjItECoP
						
						/*
						зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
						ЁSeta as Escalas Conforme Codigo do Objetivo      		  	  Ё
						юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
						RdiSetEscalas( oGdRdv , @cRdiEscRel , @cRdiEscAtg , @cRdiEscCon, cNewCodObj )

						//Descricoes de Escalas
						If (nRdjDescRe	:= GdFieldPos( "RDJ_DESCRE"	, aRdjHeader ) ) > 0
							cRdjDescRe 	:= fDesc( "RBK" , cRdiEscRel , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCRE" , "X3_TAMANHO" ) , NIL , NIL , .F. )
							aRdjCols[ nPosCodObj , nRdjDescRe ] := cRdjDescRe 
						EndIf

						If (nRdjDescAt	:= GdFieldPos( "RDJ_DESCAT"	, aRdjHeader ) ) > 0
							cRdjDescAt	:= fDesc( "RBK" , cRdiEscAtg , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCAT" , "X3_TAMANHO" ) , NIL , NIL , .F. )
							aRdjCols[ nPosCodObj , nRdjDescAt ] := cRdjDescAt 
						EndIf

//						If (nRdjDitCon	:= GdFieldPos( "RDJ_DITCON"	, aRdjHeader ) ) > 0
//							cRdjDitCon	:= fDesc( "RBK" , cRdiEscCon , "RBK_DESCRI" , GetSx3Cache( "RDJ_DITCON" , "X3_TAMANHO" ) , NIL , NIL , .F. )
//							aRdjCols[ nPosCodObj , nRdjDitCon ] := cRdjDitCon 
//						EndIf
						
						If (nRdjDescCo	:= GdFieldPos( "RDJ_DESCCO"	, aRdjHeader ) ) > 0
							cRdjDescCo	:= fDesc( "RBK" , cRdiEscCon , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCCO" , "X3_TAMANHO" ) , NIL , NIL , .F. )
							aRdjCols[ nPosCodObj , nRdjDescCo ] := cRdjDescCo 
						EndIf   
												
						++nPosCodObj
					End While
				EndIF
				IF ( ( nRdjGhostCol := GdFieldPos( "GHOSTCOL" , aRdjHeader ) ) > 0 )
					bSortaCols := { |x,y| x[ nRdjGhostCol ] < y[ nRdjGhostCol ] }
					aSort( aRdjCols , NIL , NIL , bSortaCols )
				EndIF
			EndIF
			IF ( Type( "oGdRdj" ) == "O" )
				IF (;
						( ( nRdjCodObj	:= GdFieldPos( "RDJ_CODOBJ" , oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjPeriod	:= GdFieldPos( "RDJ_PERIOD" , oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjCodDor	:= GdFieldPos( "RDJ_CODDOR" , oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjItem	:= GdFieldPos( "RDJ_ITEM" , oGdRdj:aHeader 	 ) ) > 0 );
						.and.;
						( ( nRdjSeqItm	:= GdFieldPos( "RDJ_SEQITM" , oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjEscRea	:= GdFieldPos( "RDJ_ESCREA"	, oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjEscAtg	:= GdFieldPos( "RDJ_ESCATG"	, oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjEscCon	:= GdFieldPos( "RDJ_ESCCON"	, oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjItEsCr	:= GdFieldPos( "RDJ_ITESCR"	, oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjItEsAt	:= GdFieldPos( "RDJ_ITESAT"	, oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjItAtCn	:= GdFieldPos( "RDJ_ITATCN"	, aRdjHeader 	 ) ) > 0 );
						.and.;
						( ( nRdjItECoA	:= GdFieldPos( "RDJ_ITECOA"	, oGdRdj:aHeader ) ) > 0 );
						.and.;
						( ( nRdjItECoP	:= GdFieldPos( "RDJ_ITECOP"	, oGdRdj:aHeader ) ) > 0 );
					)	
					aSort( oGdRdj:aCols , NIL , NIL , bSortaCols )
					IF ( ( nPosCodObj := aScan( oGdRdj:aCols , bAscaCols ) ) > 0 )
						cRdjItEsCr	:= GetValType( GetSx3Cache( "RDJ_ITESCR" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITESCR" , "X3_TAMANHO" ) ) 
						cRdjItEsAt	:= GetValType( GetSx3Cache( "RDJ_ITESAT" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITESAT" , "X3_TAMANHO" ) ) 
						cRdjItAtCn	:= GetValType( GetSx3Cache( "RDJ_ITATCN" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITATCN" , "X3_TAMANHO" ) )
						cRdjItECoA	:= GetValType( GetSx3Cache( "RDJ_ITECOA" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITECOA" , "X3_TAMANHO" ) ) 
						cRdjItECoP	:= GetValType( GetSx3Cache( "RDJ_ITECOP" , "X3_TIPO" ) , GetSx3Cache( "RDJ_ITECOP" , "X3_TAMANHO" ) ) 
						While ( ( nPosCodObj := aScan( oGdRdj:aCols , bAscaCols , nPosCodObj ) ) > 0 )
							oGdRdj:aCols[ nPosCodObj , nRdjCodObj ] := cNewCodObj
							oGdRdj:aCols[ nPosCodObj , nRdjEscRea ] := cRdiEscRel
							oGdRdj:aCols[ nPosCodObj , nRdjEscAtg ] := cRdiEscAtg
							oGdRdj:aCols[ nPosCodObj , nRdjEscCon ] := cRdiEscCon
							oGdRdj:aCols[ nPosCodObj , nRdjItEsCr ] := cRdjItEsCr
							oGdRdj:aCols[ nPosCodObj , nRdjItEsAt ] := cRdjItEsAt
							oGdRdj:aCols[ nPosCodObj , nRdjItAtCn ] := cRdjItAtCn
							oGdRdj:aCols[ nPosCodObj , nRdjItECoA ] := cRdjItECoA
							oGdRdj:aCols[ nPosCodObj , nRdjItECoP ] := cRdjItECoP
                    
							/*
							зддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
							ЁSeta as Escalas Conforme Codigo do Objetivo      		  	  Ё
							юддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
							RdiSetEscalas( oGdRdv , @cRdiEscRel , @cRdiEscAtg , @cRdiEscCon, cNewCodObj )

							//Descricoes de Escalas
							If (nRdjDescRe	:= GdFieldPos( "RDJ_DESCRE"	, aRdjHeader ) ) > 0
								cRdjDescRe 	:= fDesc( "RBK" , cRdiEscRel , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCRE" , "X3_TAMANHO" ) , NIL , NIL , .F. )
								oGdRdj:aCols[ nPosCodObj , nRdjDescRe ] := cRdjDescRe 
							EndIf
	
							If (nRdjDescAt	:= GdFieldPos( "RDJ_DESCAT"	, aRdjHeader ) ) > 0
								cRdjDescAt	:= fDesc( "RBK" , cRdiEscAtg , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCAT" , "X3_TAMANHO" ) , NIL , NIL , .F. )
								oGdRdj:aCols[ nPosCodObj , nRdjDescAt ] := cRdjDescAt 
							EndIf
	
	//						If (nRdjDitCon	:= GdFieldPos( "RDJ_DITCON"	, aRdjHeader ) ) > 0
	//							cRdjDitCon	:= fDesc( "RBK" , cRdiEscCon , "RBK_DESCRI" , GetSx3Cache( "RDJ_DITCON" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	//							oGdRdj:aCols[ nPosCodObj , nRdjDitCon ] := cRdjDitCon 
	//						EndIf
							
							If (nRdjDescCo	:= GdFieldPos( "RDJ_DESCCO"	, aRdjHeader ) ) > 0
								cRdjDescCo	:= fDesc( "RBK" , cRdiEscCon , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCCO" , "X3_TAMANHO" ) , NIL , NIL , .F. )
								oGdRdj:aCols[ nPosCodObj , nRdjDescCo ] := cRdjDescCo 
							EndIf
	
							++nPosCodObj
						End While
					EndIF
					IF ( ( nRdjGhostCol := GdFieldPos( "GHOSTCOL" , oGdRdj:aHeader ) ) > 0 )
						bSortaCols := { |x,y| x[ nRdjGhostCol ] < y[ nRdjGhostCol ] }
						aSort( oGdRdj:aCols , NIL , NIL , bSortaCols )	
					EndIF
				 	oGdRdj:Refresh()
				EndIF
			EndIF
		EndIF
	EndIF
	
	SetMemVar( "RDV_DESOBJ" , RdvDesObjInit() )

End Sequence

Return( lRdvCodObjVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvDesObjInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё17/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDV_DESOBJ					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDV_DESOBJ								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvDesObjInit()

Local lGetDados	:= IsInGetDados( { "RDV_CODOBJ" , "RDV_DESOBJ" } )

Local cDesc

IF ( lGetDados ) .Or. Inclui
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Codigo da Visao					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RDI" , GetMemVar( "RDV_CODOBJ" ) , "RDI_DESC" , GetSx3Cache( "RDV_DESOBJ" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDV_DESOBJ" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RDI" , RDV->RDV_CODOBJ , "RDI_DESC" , GetSx3Cache( "RDV_DESOBJ" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvDesObjBrw	 ЁAutorЁMarinaldo de JesusЁ Data Ё17/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora de Browse do Campo RDV_DESOBJ				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_INIBRW  do campo RDV_DESOBJ								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvDesObjBrw()
Return( RdvDesObjInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvCodPerVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDV_CODPER									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDV_CODPER									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvCodPerVld()

Local lRdvCodPerVld	:= .T.

Local bSortaCols
Local cLstCodPer
Local cNewCodPer 
Local cTipo
Local lCodPerChj
Local nRdjPeriod
Local nPosCodPer
Local nRdjGhostCol
Local oRdvBrowse

Begin Sequence

	IF !( lRdvCodPerVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdvCodPerVld := ExistCpo( "RDU" ) )
		Break
	EndIF       
	
	If RDU->( FieldPos("RDU_TIPO") ) > 0
		cTipo := AllTrim(Fdesc("RDU", GetMemVar("RDV_CODPER"), "RDU_TIPO"))
		IF 	!( lRdvCodPerVld :=	( cTipo == "2" .And. RDI->RDI_TIPO == "1")  .Or.; //PDP 
								( cTipo == "3" .And. RDI->RDI_TIPO == "2") ) 		//PM

			//"O PerМodo Informado И invАlido. Selecione um perМodo que exista no Cadastro de PerМodos""###"Aviso de Inconsist┬ncia"
			MsgInfo( OemToAnsi( STR0023 ) , OemToAnsi( STR0010 ) )
			Break
		EndIF       
    EndIf
    
	IF IsInGetDados( { "RDV_CODPER" } )
		lCodPerChj	:= ( ( cLstCodPer := GdFieldGet( "RDV_CODPER" ) ) <> ( cNewCodPer := GetMemVar( "RDV_CODPER" ) ) ) 
		IF ( lCodPerChj )
			IF !Empty( cLstCodPer )
				IF !( lRdvCodPerVld := RdvChkChgF() )
					Break
				EndIF
				IF ( Type( "oGdRdv" ) == "O" )
					oRdvBrowse := oGdRdv:oBrowse
				EndIF
				GdFieldPut( "RDV_CODPER" , cNewCodPer )
				IF !( lRdvCodPerVld := RdvGdLinOk( oRdvBrowse , .F. ) )
					GdFieldPut( "RDV_CODPER" , cLstCodPer )
					SetMemVar( "RDV_CODPER" , cLstCodPer )
					Break
				EndIF
			EndIF	
			bSortaCols	:= { |x,y| ( x[ nRdjPeriod ] < y[ nRdjPeriod ] ) }
			bAscaCols	:= { |aColsElem| ( aColsElem[ nRdjPeriod ] == cLstCodPer ) }
			IF (;
					( Type( "aRdjHeader" ) == "A" );
					.and.;
					( Type( "aRdjCols" ) == "A" );
					.and.;
					( ( nRdjPeriod := GdFieldPos( "RDJ_PERIOD" , aRdjHeader ) ) > 0 );
				 )
				aSort( aRdjCols , NIL , NIL , bSortaCols )
				IF ( ( nPosCodPer := aScan( aRdjCols , bAscaCols ) ) > 0 )
					While ( ( nPosCodPer := aScan( aRdjCols , bAscaCols , nPosCodPer ) ) > 0 )
						aRdjCols[ nPosCodPer , nRdjPeriod ] := cNewCodPer
						++nPosCodPer
					End While
				EndIF
				IF ( ( nRdjGhostCol := GdFieldPos( "GHOSTCOL" , aRdjHeader ) ) > 0 )
					bSortaCols := { |x,y| x[ nRdjGhostCol ] < y[ nRdjGhostCol ] }
					aSort( aRdjCols , NIL , NIL , bSortaCols )
				EndIF
			EndIF
			IF ( Type( "oGdRdj" ) == "O" )
				IF ( ( nRdjPeriod := GdFieldPos( "RDJ_PERIOD" , oGdRdj:aHeader ) ) > 0 )
					aSort( oGdRdj:aCols , NIL , NIL , bSortaCols )
					IF ( ( nPosCodPer := aScan( oGdRdj:aCols , bAscaCols ) ) > 0 )
						While ( ( nPosCodPer := aScan( oGdRdj:aCols , bAscaCols , nPosCodPer ) ) > 0 )
							oGdRdj:aCols[ nPosCodPer , nRdjPeriod ] := cNewCodPer
							++nPosCodPer
						End While
					EndIF
					IF ( ( nRdjGhostCol := GdFieldPos( "GHOSTCOL" , aRdjHeader ) ) > 0 )
						bSortaCols := { |x,y| x[ nRdjGhostCol ] < y[ nRdjGhostCol ] }
						aSort( aRdjCols , NIL , NIL , bSortaCols )
					EndIF
				 	oGdRdj:Refresh()
				EndIF
			EndIF
		EndIF
	EndIF
	
	RdvDesPerInit()

End Sequence

Return( lRdvCodPerVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvDesPerInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDV_DESPER					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDV_DESPER								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvDesPerInit()

Local lGetDados	:= IsInGetDados( { "RDV_CODOBJ" , "RDV_DESPER" } )

Local cDesc

IF ( lGetDados ) .Or. Inclui
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Codigo da Visao					   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RDU" , GetMemVar( "RDV_CODPER" ) , "RDU_DESC" , GetSx3Cache( "RDV_DESPER" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDV_DESPER" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RDU" , RDV->RDV_CODPER , "RDU_DESC" , GetSx3Cache( "RDV_DESPER" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvDesPerBrw	 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora de Browse do Campo RDV_DESPER				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_INIBRW  do campo RDV_DESPER								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvDesPerBrw()
Return( RdvDesPerInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvCodDorVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё04/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDV_CODDOR									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDV_CODDOR									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvCodDorVld()

Local lRdvCodDorVld	:= .T.

Local bSortaCols
Local cLstCodDor
Local cNewCodDor
Local lCodDorChj
Local nRdjCodDor
Local nRdjGhostCol
Local nPosCodDor
Local oRdvBrowse

Begin Sequence

	IF !( lRdvCodDorVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdvCodDorVld := ExistCpo( "RD0" ) )
		Break
	EndIF

	IF IsInGetDados( { "RDV_CODDOR" } )
		lCodDorChj	:= ( ( cLstCodDor := GdFieldGet( "RDV_CODDOR" ) ) <> ( cNewCodDor := GetMemVar( "RDV_CODDOR" ) ) ) 
		IF ( lCodDorChj )
			IF !Empty( cLstCodDor )
				IF !( lRdvCodDorVld := RdvChkChgF() )
					Break
				EndIF
				IF ( Type( "oGdRdv" ) == "O" )
					oRdvBrowse := oGdRdv:oBrowse
				EndIF
				GdFieldPut( "RDV_CODDOR" , cNewCodDor )
				IF !( lRdvCodDorVld := RdvGdLinOk( oRdvBrowse , .F. ) )
					GdFieldPut( "RDV_CODDOR" , cLstCodDor )
					SetMemVar( "RDV_CODDOR" , cLstCodDor )
					Break
				EndIF
			EndIF	
			bSortaCols	:= { |x,y| ( x[ nRdjCodDor ] < y[ nRdjCodDor ] ) }
			bAscaCols	:= { |aColsElem| ( aColsElem[ nRdjCodDor ] == cLstCodDor ) }
			IF (;
					( Type( "aRdjHeader" ) == "A" );
					.and.;
					( Type( "aRdjCols" ) == "A" );
					.and.;
					( ( nRdjCodDor := GdFieldPos( "RDJ_CODDOR" , aRdjHeader ) ) > 0 );
				 )
				aSort( aRdjCols , NIL , NIL , bSortaCols )
				IF ( ( nPosCodDor := aScan( aRdjCols , bAscaCols ) ) > 0 )
					While ( ( nPosCodDor := aScan( aRdjCols , bAscaCols , nPosCodDor ) ) > 0 )
						aRdjCols[ nPosCodDor , nRdjCodDor ] := cNewCodDor
						++nPosCodDor
					End While
				EndIF
				IF ( ( nRdjGhostCol := GdFieldPos( "GHOSTCOL" , aRdjHeader ) ) > 0 )
					bSortaCols := { |x,y| x[ nRdjGhostCol ] < y[ nRdjGhostCol ] }
					aSort( aRdjCols , NIL , NIL , bSortaCols )
				EndIF
			EndIF
			IF ( Type( "oGdRdj" ) == "O" )
				IF ( ( nPosCodDor := GdFieldPos( "RDJ_CODDOR" , oGdRdj:aHeader ) ) > 0 )
					aSort( oGdRdj:aCols , NIL , NIL , bSortaCols )
					IF ( ( nPosCodDor := aScan( oGdRdj:aCols , bAscaCols ) ) > 0 )
						While ( ( nPosCodDor := aScan( oGdRdj:aCols , bAscaCols , nPosCodDor ) ) > 0 )
							oGdRdj:aCols[ nPosCodDor , nRdjCodDor] := cNewCodDor
							++nPosCodDor
						End While
					EndIF
					IF ( ( nRdjGhostCol := GdFieldPos( "GHOSTCOL" , aRdjHeader ) ) > 0 )
						bSortaCols := { |x,y| x[ nRdjGhostCol ] < y[ nRdjGhostCol ] }
						aSort( aRdjCols , NIL , NIL , bSortaCols )
					EndIF
				 	oGdRdj:Refresh()
				EndIF
			EndIF
		EndIF
	EndIF

	SetMemVar( "RDV_DESDOR" , RdvDesDorInit() )

End Sequence

Return( lRdvCodDorVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvCodDorInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDV_CODDOR					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDV_CODDOR								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvCodDorInit()
Local aArea				:= GETAREA()
Local cFilRD0			:= xFilial( "RD0" )
Local cRd0CodDor		:= GetMemVar( "RD0_CODIGO" )
Local cRdvCodDorInit	:= Space( GetSx3Cache( "RDV_CODDOR" , "X3_TAMANHO" ) )
Local cRdvDescDorInit	:= Space( GetSx3Cache( "RDV_DESDOR" , "X3_TAMANHO" ) )
Local cRd0Order			:= RetOrdem( "RD0" , "RD0_FILIAL+RD0_CODIGO" )
Local nRd0Recno			:= RD0->( Recno() )

cRdvCodDorInit			:= fDesc( "RD0" , cRd0CodDor , "RD0_CODMEN" , GetSx3Cache( "RDV_CODDOR" , "X3_TAMANHO" ) , cFilRD0 , cRd0Order , .F. )
cRdvDescDorInit			:= fDesc( "RD0" , cRdvCodDorInit , "RD0_NOME" , GetSx3Cache( "RDV_DESDOR" , "X3_TAMANHO" ) , cFilRD0 , cRd0Order , .F. )
RD0->( MsGoto( nRd0Recno ) )

SetMemVar( "RDV_CODDOR" , cRdvCodDorInit )
SetMemVar( "RDV_DESDOR" , cRdvDescDorInit )

RestArea(aArea)
Return( cRdvCodDorInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvDesDorInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё17/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDV_DESDOR					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDV_DESDOR								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvDesDorInit()

Local cCodDor
Local cDesc
Local lGdFieldPut
Local nRd0Recno

Local lGetDados		:= IsInGetDados( { "RDV_CODDOR" , "RDV_DESDOR" } )

IF ( lGetDados ) .Or. Inclui
	cCodDor	:= GetMemVar( "RDV_CODDOR" )
Else
	DEFAULT cCodDor := RDV->RDV_CODDOR
	IF Empty( cCodDor )
		cCodDor := RdvCodDorInit()
	EndIF
EndIF

/*/
здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
Ё Carrega o Nome do Avaliador            				   	   Ё
юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
nRd0Recno := RD0->( Recno() )
cDesc := fDesc( "RD0" , cCodDor , "RD0_NOME" , GetSx3Cache( "RDV_DESDOR" , "X3_TAMANHO" ) , NIL , NIL , .F. )
RD0->( MsGoto( nRd0Recno ) )

IF ( lGetDados )
	lGdFieldPut := (;
						!Empty( cCodDor );
						.or.;
						!( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) );
					)	
	IF ( lGdFieldPut )
		GdFieldPut( "RDV_DESDOR" , cDesc )
	EndIF
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvDesDorBrw	 ЁAutorЁMarinaldo de JesusЁ Data Ё17/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora de Browse do Campo RDV_DESDOR				Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_INIBRW  do campo RDV_DESDOR								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvDesDorBrw()
Return( RdvDesDorInit() )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvStatusVld     ЁAutorЁMarinaldo de JesusЁ Data Ё21/11/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDV_STATUS									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDV_STATUS									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvStatusVld()

Local lRdvStatusOk 	:= .T.
Local lGetDados		:= IsInGetDados( { "RDV_STATUS" } )

Begin Sequence

	IF !( lRdvStatusOk := Pertence( RdvStatusBox( .T. ) ) )
		Break
	EndIF              

	IF ( lGetDados ) 
		cResourceName := Apda100Leg(GetMemVar( "RDV_STATUS" ), Nil, Nil, Nil, Nil, 1)		
		GdFieldPut( "COLBMP" , cResourceName, oGdRDV:nAt ,oGdRDV:aHeader, oGdRDV:aCols )
	EndIF

End Sequence

Return( lRdvStatusOk )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvStatusBox ЁAutorЁMarinaldo de Jesus    Ё Data Ё06/10/2003Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Retornar as Opcoes do Campo RDV_STATUS         	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_CBOX para o campo RDV_STATUS                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvStatusBox( lValid , lRetDesc , cOpcDesc )

Local cOpcBox

DEFAULT lValid		:= .F.
DEFAULT lRetDesc	:= .F.

IF !( lValid )

	IF !( lRetDesc )

		cOpcBox := ( "1=" + STR0041 + ";" )	//"Avaliado"
		cOpcBox += ( "2=" + STR0042 + ";" )	//"Avaliador"
		cOpcBox += ( "3=" + STR0043       )	//"Finalizado"
	
	Else

		Do Case
			Case ( cOpcDesc == "1" ) ; ( cOpcBox := STR0041 )	//"Avaliado"
			Case ( cOpcDesc == "2" ) ; ( cOpcBox := STR0042 )	//"Avaliador"
			Case ( cOpcDesc == "3" ) ; ( cOpcBox := STR0043 )	//"Finalizado"
		End Case

	EndIF

Else

	cOpcBox := "123"

EndIF
	
Return( cOpcBox )


/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvStatusInitЁAutorЁMarinaldo de Jesus    Ё Data Ё06/10/2003Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Retornar as Opcoes do Campo RDV_STATUS         	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO para o campo RDV_STATUS                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvStatusInit()
Return( SubStr( RdvStatusBox( .T. ) , 1 , 1 ) )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjCodObjVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё04/12/2002Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_CODOBJ									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_CODOBJ									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjCodObjVld()

Local lRdjCodObjVld	:= .T.

Begin Sequence

	IF !( lRdjCodObjVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjCodObjVld := ExistCpo( "RDI" ) )
		Break
	EndIF

End Sequence

Return( lRdjCodObjVld )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjCodObjInitЁAutorЁMarinaldo de Jesus    Ё Data Ё30/04/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializador padrao para o campo RDJ_CODOBJ   			    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_CODOBJ                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjCodObjInit()

Local cRdjCodObjInit	:= Space( GetSx3Cache( "RDJ_CODOBJ" , "X3_TAMANHO" ) )

IF ( Type( "oGdRdv" ) == "O" )
	If Funname() == "APDA100" .And. Type( "oGdRdj" ) == "O" .And. GdFieldGet( "RDV_CODOBJ" , oGdRdj:nAt , .F. , oGdRdj:aHeader , oGdRdj:aCols )
		cRdjCodObjInit := GdFieldGet( "RDV_CODOBJ" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
	ElseIf Funname() != "APDA100"
		cRdjCodObjInit := GdFieldGet( "RDV_CODOBJ" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
	EndIf
Else
	cRdjCodObjInit := Space( GetSx3Cache( "RDJ_CODOBJ" , "X3_TAMANHO" ) ) 	
EndIF

Return( cRdjCodObjInit )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjCodParVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_CODPAR   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_CODPAR                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjCodParVld()

Local lRdjCodParVld := .T.

Begin Sequence

	IF !( lRdjCodParVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjCodParVld := ExistCpo("RD0") )
		Break
	EndIF

End Sequence

Return( lRdjCodParVld )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDtIniVld	 ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_DTINI    			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_DTINI                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDtIniVld()

Local lRdjDtIniVld := .T.

Begin Sequence

	IF !( lRdjDtIniVld := NaoVazio() )
		Break
	EndIF

End Sequence

Return( lRdjDtIniVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDtIniInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DTINI 					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DTINI  								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDtIniInit()
Return( SetMemVar( "RDJ_DTINI" , Ctod("//") ) )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDtFimVld	 ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_DTFIM    			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_DTFIM                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDtFimVld()

Local lRdjDtFimVld := .T.

Begin Sequence

	IF !( lRdjDtFimVld := NaoVazio() )
		Break
	EndIF

End Sequence

Return( lRdjDtFimVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDtFimInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DTFIM 					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DTFIM  								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDtFimInit()
Return( SetMemVar( "RDJ_DTFIM" , Ctod("//") ) )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjEscReaVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ESCREA   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ESCREA                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjEscReaVld()

Local lRdjEscReaVld := .T.

Begin Sequence

	IF !( lRdjEscReaVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjEscReaVld := ExistCpo("RBK") )
		Break
	EndIF

End Sequence

Return( lRdjEscReaVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjEscReaInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ESCREA					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ESCREA 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjEscReaInit()

Local cRdjEscReaInit := GetMemVar( "RDI_ESCREL" )

Return( cRdjEscReaInit )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjIteScrVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ITESCR   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ITESCR                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjIteScrVld()

Local lRdjIteScrVld	:= .T.

Begin Sequence

	IF !( lRdjIteScrVld := NaoVazio() )
		Break
	EndIF
	
	IF IsInGetDados( { "RDJ_ESCREA" } )
		SetMemVar( "RDJ_ESCREA" , GdFieldGet( "RDJ_ESCREA" ) )
	EndIF

	IF !( lRdjIteScrVld := ExistCpo( "RBL" , ( GetMemVar("RDJ_ESCREA")+GetMemVar("RDJ_ITESCR") ) ) )
		Break
	EndIF               

	RdjDItEsRInit() 

End Sequence

Return( lRdjIteScrVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjIteScrInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ITESCR					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ITESCR 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjIteScrInit()
Return( SetMemVar( "RDJ_ITESCR" , Space( GetSx3Cache( "RDJ_ITESCR" , "X3_TAMANHO" ) ) ) ) 

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjEscAtgVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ESCATG   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ESCATG                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjEscAtgVld()

Local lRdjEscAtgVld

Begin Sequence

	IF !( lRdjEscAtgVld := NaoVazio() )
		Break
	EndIF

	IF !( lRdjEscAtgVld := ExistCpo("RBK") )
		Break
	EndIF

End Sequence

Return( lRdjEscAtgVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjEscAtgInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ESCATG					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ESCATG 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjEscAtgInit()

Local cRdjEscAtgInit := GetMemVar( "RDI_ESCATG" )

Return( cRdjEscAtgInit )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItesAtVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ITESAT   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ITESAT                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItesAtVld()

Local lRdjItesAtVld := .T.

Begin Sequence

	IF !( lRdjItesAtVld := NaoVazio() )
		Break
	EndIF

	IF IsInGetDados( { "RDJ_ESCATG" } )
		SetMemVar( "RDJ_ESCATG" , GdFieldGet( "RDJ_ESCATG" ) )
	EndIF

	IF !( lRdjItesAtVld := ExistCpo( "RBL" , ( GetMemVar("RDJ_ESCATG")+GetMemVar("RDJ_ITESAT") ) ) )
		Break
	EndIF
         
	RdjDItEsAInit()
	
End Sequence

Return( lRdjItesAtVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItesAtInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ITESAT					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ITESAT 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItesAtInit()
Return( SetMemVar( "RDJ_ITESAT" , Space(GetSx3Cache( "RDJ_ITESAT" , "X3_TAMANHO" )) ) ) 

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItAtCnVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ITATCN   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ITATCN                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItAtCnVld()

Local lRdjItAtCnVld := .T.

Begin Sequence

	IF !( lRdjItAtCnVld := NaoVazio() )
		Break
	EndIF

	IF IsInGetDados( { "RDJ_ESCATG" } )
		SetMemVar( "RDJ_ESCATG" , GdFieldGet( "RDJ_ESCATG" ) )
	EndIF

	IF !( lRdjItAtCnVld := ExistCpo( "RBL" , ( GetMemVar("RDJ_ESCATG")+GetMemVar("RDJ_ITATCN") ) ) )
		Break
	EndIF               
	
	RdjDItConInit()

End Sequence

Return( lRdjItAtCnVld )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjEscConVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ESCCON   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ESCCON                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjEscConVld()

Local lRdjEscConVld := .T.

Begin Sequence

	IF !( lRdjEscConVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjEscConVld := ExistCpo("RBK") )
		Break
	EndIF

End Sequence

Return( lRdjEscConVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjEscConInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё13/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ESCCON					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ESCCON 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjEscConInit()

Local cRdjEscConInit := GetMemVar( "RDI_ESCCON" )

Return( cRdjEscConInit )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjIteCoaVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ITECOA   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ITECOA                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjIteCoaVld()

Local lRdjIteCoaVld := .T.

Begin Sequence

	IF !( lRdjIteCoaVld := NaoVazio() )
		Break
	EndIF

	IF IsInGetDados( { "RDJ_ESCCON" } )
		SetMemVar( "RDJ_ESCCON" , GdFieldGet( "RDJ_ESCCON" ) )
	EndIF

	IF !( lRdjIteCoaVld := ExistCpo( "RBL" , ( GetMemVar("RDJ_ESCCON")+GetMemVar("RDJ_ITECOA") ) ) )
		Break
	EndIF               
	
	RdjDItCoAInit()

End Sequence

Return( lRdjIteCoaVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjIteCoaInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё17/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ITECOA					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ITECOA 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjIteCoaInit()
Return( SetMemVar( "RDJ_ITECOA" , Space(GetSx3Cache( "RDJ_ITECOA" , "X3_TAMANHO" )) ) ) 

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjIteCopVld ЁAutorЁMarinaldo de Jesus    Ё Data Ё13/03/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o campo RDJ_ITECOP   			          		Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ITECOP                        	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjIteCopVld()

Local lRdjIteCopVld := .T.

Begin Sequence

	IF !( lRdjIteCopVld := NaoVazio() )
		Break
	EndIF

	IF IsInGetDados( { "RDJ_ESCCON" } )
		SetMemVar( "RDJ_ESCCON" , GdFieldGet( "RDJ_ESCCON" ) )
	EndIF

	IF !( lRdjIteCopVld := ExistCpo( "RBL" , ( GetMemVar("RDJ_ESCCON")+GetMemVar("RDJ_ITECOP") ) ) )
		Break
	EndIF  
	
	RdjDItCoPInit()

End Sequence

Return( lRdjIteCopVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjIteCopInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё17/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_ITECOP					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_ITECOP 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjIteCopInit()
Return( SetMemVar( "RDJ_ITECOP" , Space(GetSx3Cache( "RDJ_ITECOP" , "X3_TAMANHO" )) ) ) 

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDesMemInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё22/03/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DESMEM					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DESMEM 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDesMemInit()

Local cRdjDesMemInit := ""

IF !( Inclui := IF( ( Type( "Inclui" ) == "L" ) , Inclui , .F. ) )

	cRdjDesMemInit := ApdMsMm( RDJ->RDJ_CODMEM, NIL, NIL, NIL, 3, , , "RDJ")

EndIF

Return( cRdjDesMemInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDesDorInit	 ЁAutorЁEmerson Grassi    Ё Data Ё14/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DESDOR					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DESDOR 								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDesDorInit()

Local cRdjDesDorInit := ""

IF !( Inclui := IF( ( Type( "Inclui" ) == "L" ) , Inclui , .F. ) )

	cRdjDesDorInit := ApdMsMm( RDJ->RDJ_CODDER, NIL, NIL, NIL, 3, , , "RDJ")

EndIF

Return( cRdjDesDorInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjStatusVld     ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_STATUS									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_STATUS									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjStatusVld()

Local lRdjStatusOk 	:= .T.
Local lGetDados		:= IsInGetDados( { "RDJ_STATUS" } )

Begin Sequence

	IF !( lRdjStatusOk := Pertence( RdjStatusBox( .T. ) ) )
		Break
	EndIF

	IF ( lGetDados ) 
		cResourceName := Apda100Leg(GetMemVar( "RDJ_STATUS" ), Nil, Nil, Nil, Nil, 2)		
		GdFieldPut( "COLBMP" , cResourceName, oGdRDJ:nAt ,oGdRDJ:aHeader, oGdRDJ:aCols )
	EndIF

End Sequence

Return( lRdjStatusOk )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjStatusBox ЁAutorЁMarinaldo de Jesus    Ё Data Ё30/04/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Retornar as Opcoes do Campo RDJ_STATUS         	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_CBOX para o campo RDJ_STATUS                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjStatusBox( lValid , lRetDesc , cOpcDesc )

Local cOpcBox

DEFAULT lValid		:= .F.
DEFAULT lRetDesc	:= .F.

IF !( lValid )

	IF !( lRetDesc )

		cOpcBox := ( "1=" + STR0018 + ";" )	//"Proposto"
		cOpcBox += ( "2=" + STR0019 + ";" )	//"Aprovado"
		cOpcBox += ( "3=" + STR0020 + ";" )	//"Aprovado com Pendencia"
		cOpcBox += ( "4=" + STR0021 + ";" )	//"Cancelado"
		cOpcBox += ( "5=" + STR0037 + ";" )	//"Aprovado ( HistСrico )"
		cOpcBox += ( "6=" + STR0038       )	//"Cancelado ( HistСrico )"
	
	Else

		Do Case
			Case ( cOpcDesc == "1" ) ; ( cOpcBox := STR0018 )	//"Proposto"
			Case ( cOpcDesc == "2" ) ; ( cOpcBox := STR0019 )	//"Aprovado"
			Case ( cOpcDesc == "3" ) ; ( cOpcBox := STR0020 )	//"Aprovado com Pendencia"
			Case ( cOpcDesc == "4" ) ; ( cOpcBox := STR0021 )	//"Cancelado"
			Case ( cOpcDesc == "5" ) ; ( cOpcBox := STR0037 )	//"Aprovado ( HistСrico )"
			Case ( cOpcDesc == "6" ) ; ( cOpcBox := STR0038 )	//"Cancelado ( HistСrico )"
		End Case

	EndIF

Else

	cOpcBox := "123456"

EndIF
	
Return( cOpcBox )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjStatusInitЁAutorЁMarinaldo de Jesus    Ё Data Ё30/04/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Retornar as Opcoes do Campo RDJ_STATUS         	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO para o campo RDJ_STATUS                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjStatusInit()

Local lGetDados	:= IsInGetDados( { "RDJ_STATUS" } )

Local cStatus := "1"

IF ( lGetDados ) .and. !(IsInCallStack('INITPAD'))
	    
	//Altera Status do RDJ/RDV
	GdFieldPut( "RDJ_STATUS" , cStatus, oGdRDJ:nAt ,oGdRDJ:aHeader, oGdRDJ:aCols ) 

	cResourceName := Apda100Leg(cStatus, Nil, Nil, Nil, Nil, 0)		
	GdFieldPut( "COLBMP" , cResourceName, oGdRDJ:nAt ,oGdRDJ:aHeader, oGdRDJ:aCols )
			
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega o Status do Item (RDJ)							   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_STATUS" , cStatus )
	EndIF	
Else
	cStatus	:= SubStr( RdjStatusBox( .T. ) , 1 , 1 )
EndIF

Return( cStatus )  

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDatItmVld     ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_DATITM									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_DATITM									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDatItmVld()

Local lRdjDatItmVld	:= .T.

Begin Sequence

	IF !( lRdjDatItmVld := NaoVazio() )
		Break
	EndIF

End Sequence

Return( lRdjDatItmVld )  

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDatItmInitЁAutorЁMarinaldo de Jesus    Ё Data Ё30/04/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Inicializar o campo RDJ_DATITM                 	Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO para o campo RDJ_DATITM                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDatItmInit()
Local dData	:= dDataBase
Return(dData)

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjPeriodVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_PERIOD									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_PERIOD									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjPeriodVld()

Local lRdjPeriodVld	:= .T.

Begin Sequence

	IF !( lRdjPeriodVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjPeriodVld := ExistCpo( "RDU" ) )
		Break
	EndIF       
	
	If RDU->( FieldPos("RDU_TIPO") ) > 0
		IF !( lRdjPeriodVld :=	AllTrim(Fdesc("RDU", GetMemVar("RDJ_PERIOD"), "RDU_TIPO")) == "2" )
			Break
		EndIF     
	EndIf
	
End Sequence

Return( lRdjPeriodVld )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjPeriodInitЁAutorЁMarinaldo de Jesus    Ё Data Ё30/04/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializador padrao para o campo RDJ_PERIOD   			    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_PERIOD                         	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjPeriodInit()

Local cRdjPeriodInit

IF ( Type( "oGdRdv" ) == "O" )
	cRdjPeriodInit := GdFieldGet( "RDV_CODPER" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
Else
	cRdjPeriodInit := Space( GetSx3Cache( "RDJ_PERIOD" , "X3_TAMANHO" ) ) 	
EndIF

Return( cRdjPeriodInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjCodDorVld	 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_CODDOR									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_CODDOR									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjCodDorVld()

Local lRdjCodDorVld	:= .T.

Begin Sequence

	IF !( lRdjCodDorVld := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjCodDorVld := ExistCpo( "RD0" ) )
		Break
	EndIF

End Sequence

Return( lRdjCodDorVld )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjCodDorInitЁAutorЁMarinaldo de Jesus    Ё Data Ё30/04/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializador padrao para o campo RDJ_CODDOR 			    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_CODDOR	                       	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjCodDorInit()

Local cRdjCodDorInit

IF ( Type( "oGdRdv" ) == "O" ) 
	cRdjCodDorInit := GdFieldGet( "RDV_CODDOR" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
Else
	cRdjCodDorInit := Space( GetSx3Cache( "RDJ_CODDOR" , "X3_TAMANHO" ) ) 	
EndIF

Return( cRdjCodDorInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItemVld		 ЁAutorЁMarinaldo de JesusЁ Data Ё30/04/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_ITEM  									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_ITEM  									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItemVld()

Local lRdjItemVld := .T.

Begin Sequence

	IF !( lRdjItemVld := NaoVazio() )
		Break
	EndIF

End Sequence

Return( lRdjItemVld )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItemInit		 ЁAutorЁMarinaldo de JesusЁ Data Ё04/08/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializador Padrao do Campo RDJ_ITEM  					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do Campo RDJ_ITEM  								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItemInit()

Local cRdjItemInit
Local nRdjItem

Begin Sequence

	IF IsInGetDados( { "RDJ_ITEM" } )
		cRdjItemInit := GdNumItem( "RDJ_ITEM" , NIL , 1 )
		Break
	EndIF
	
	IF (;
			( Type( "oGdRdj" ) == "O" );
			.and.;
			( ( nRdjItem := GdFieldPos( "RDJ_ITEM" , oGdRdj:aHeader ) ) > 0 );
		)
		cRdjItemInit := GdNumItem( "RDJ_ITEM" , NIL , 1 , oGdRdj:aHeader , oGdRdj:aCols , nRdjItem )
		Break
	EndIF

	DEFAULT cRdjItemInit := Soma1( Replicate( "0" , GetSx3Cache( "RDJ_ITEM" , "X3_TAMANHO" ) ) )

End Sequence

Return( cRdjItemInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjSeqItm		 ЁAutorЁMarinaldo de JesusЁ Data Ё28/10/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid do Campo RDJ_SEQITM  									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁValid do Campo RDJ_SEQITM  									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjSeqItm()

Local lRdjSeqItm := .T.

Begin Sequence

	IF !( lRdjSeqItm := NaoVazio() )
		Break
	EndIF

End Sequence

Return( lRdjSeqItm )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjSeqItmInit	 ЁAutorЁMarinaldo de JesusЁ Data Ё28/10/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializador Padrao do Campo RDJ_SEQITM  					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do Campo RDJ_SEQITM  							Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjSeqItmInit()

Local bAscan

Local cRdjItem
Local cRdjSeqItmInit
Local cbAscanNum
Local cStackExit
Local cRdjDefSItm

Local nRdjItem
Local nRdjSeqItm
Local nRdjLine

Begin Sequence

	bAscan		:= { |x| ( ( x[nRdjItem] == cRdjItem ) .and. ( x[nRdjSeqItm] == cbAscanNum ) ) }
	cStackExit	:= "APDA100/__EXECUTE/RUNAPP/SIGAAPD/"
	cRdjDefSItm := Replicate( "0" , GetSx3Cache( "RDJ_SEQITM" , "X3_TAMANHO" ) )

	IF IsInGetDados( { "RDJ_ITEM" , "RDJ_SEQITM" } )
		nRdjItem		:= GdFieldPos( "RDJ_ITEM" )
		nRdjSeqItm		:= GdFieldPos( "RDJ_SEQITM" )
		nRdjLine		:= IF( InAddLine( cStackExit ) , Min( n + 1 , Len( aCols ) ) , n )
		cRdjItem 		:= GdFieldGet( "RDJ_ITEM" , nRdjLine )
		cRdjSeqItmInit	:= GdNumItem("RDJ_SEQITM",cRdjDefSItm,nRdjLine,aHeader,aCols,nRdjSeqItm,.T.,bAscan,@cbAscanNum)
		Break
	EndIF
	
	IF (;
			( Type( "oGdRdj" ) == "O" );
			.and.;
			!Empty( oGdRdj:aCols );
			.and.;
			( ( nRdjItem 	:= GdFieldPos( "RDJ_ITEM" , oGdRdj:aHeader ) ) > 0 );
			.and.;
			( ( nRdjSeqItm	:= GdFieldPos( "RDJ_SEQITM" , oGdRdj:aHeader ) ) > 0 );
		)
		nRdjLine		:= IF( InAddLine( cStackExit ) , Min( oGdRdj:oBrowse:nAt + 1 , Len( oGdRdj:aCols ) ) , oGdRdj:oBrowse:nAt )
		cRdjItem 		:= GdFieldGet( "RDJ_ITEM" , oGdRdj:oBrowse:nAt , .F. , oGdRdj:aHeader , oGdRdj:aCols )
		cRdjSeqItmInit	:= GdNumItem("RDJ_SEQITM",cRdjDefSItm,nRdjLine,oGdRdj:aHeader,oGdRdj:aCols,nRdjSeqItm,.T.,bAscan,@cbAscanNum)
		Break
	EndIF

	DEFAULT cRdjSeqItmInit := Soma1( cRdjDefSItm )

End Sequence

Return( cRdjSeqItmInit )

/*
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvPapelInit	 ЁAutorЁMauricio MR       Ё Data Ё16/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDV_PAPEL					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDV_PAPEL								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
Function RdvPapelInit()

Local cRdvPapelInit := ""

IF !( Inclui := IF( ( Type( "Inclui" ) == "L" ) , Inclui , .F. ) )

	cRdvPapelInit := ApdMsMm( RDV->RDV_CODPAP, NIL, NIL, NIL, 3, , , "RDV")

EndIF

Return( cRdvPapelInit )


/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItObjVld	 ЁAutorЁMauricio MR           Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Validar o Conteudo do Campo RDJ_ITOBJ 	        Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_ITOBJ                      	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItObjVld()

Local lRdjItObjOk 	:= .T. 

Begin Sequence

	IF !( lRdjItObjOk := NaoVazio() )
		Break
	EndIF
	
	IF !( lRdjItObjOk := ExistCpo('RDW', (GdFieldGet("RDJ_CODOBJ")+GetMemVar("RDJ_ITOBJ"))) )
	   	Break
	EndIF
    
	RdjDscITOInit( GetMemVar("RDJ_ITOBJ") , .T. )
	
	RdjTpCursInit( GdFieldGet("RDJ_CODOBJ"), GetMemVar("RDJ_ITOBJ") , .T. ) 
	RdjDescTpInit( GdFieldGet("RDJ_TPCURS"), .T.)
	RdjDsCursInit( GdFieldGet("RDJ_TPCURS"), GetMemVar("RDJ_CURSO") , .T. ) 
End Sequence


Return( lRdjItObjOk )
                        


/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjItObjInit	 ЁAutorЁMauricio MR       Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializador Padrao do Campo RDJ_ITOBJ  					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do Campo RDJ_ITOBJ  								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjItObjInit()

Local cRdjItObjInit
Local cRdjCodObj
Local nOrder 		:= RetOrdem( "RDW" , "RDW_FILIAL+RDW_CODOBJ+RDW_ITEM" , .F. )

lGetDados := IsInGetDados( { "RDJ_ITOBJ" } )

IF ( lGetDados )
	cRdjCodObj	:= GdFieldGet("RDJ_CODOBJ")
Else
	cRdjCodObj	:= RDJ->RDJ_CODOBJ
Endif
   
cRdjItObjInit:= PosAlias( "RDW" , cRdjCodObj , xFilial( "RDJ" ) , "RDW_ITEM" , nOrder , .T. )     

SetMemVar( "RDJ_ITOBJ" ,  cRdjItObjInit )

Return( cRdjItObjInit )


/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDscITOInit	 ЁAutorЁMauricio MR       Ё Data Ё21/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RdJ_DSCITO					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DSCITO								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDscITOInit( cRdjItObj , lGdFieldPut )

Local cRdjDscITOInit	:= ""
Local cRdjCodObj
Local lGetDados		:= .F.

DEFAULT lGdFieldPut := .F.

lGetDados := IsInGetDados( { "RDJ_DSCITO" } )

IF ( lGetDados )
	DEFAULT cRdjCodObj := GdFieldGet( "RDJ_CODOBJ" )
	DEFAULT cRdjItObj  := GetMemVar( "RDJ_ITOBJ" )
	
	cRdjDscITOInit	:= fDesc( "RDW" , cRdjCodObj+cRdjItObj , "RDW_DESCIT" , NIL , NIL , NIL , .F. )
	cRdjDscITOInit	:= Padr( cRdjDscITOInit , GetSx3Cache( "RDJ_DSCITO" , "X3_TAMANHO" ) )
	IF ( lGdFieldPut )
		GdFieldPut( "RDJ_DSCITO" , cRdjDscITOInit )
	EndIF	
	
Else
    cRdjCodObj	:= RDJ->RDJ_CODOBJ
	cRdjItObj	:= RDJ->RDJ_ITOBJ   
	
	cRdjDscITOInit	:= fDesc( "RDW" , cRdjCodObj+cRdjItObj , "RDW_DESCIT" , NIL , NIL , NIL , .F. )
	cRdjDscITOInit	:= Padr( cRdjDscITOInit , GetSx3Cache( "RDJ_DSCITO" , "X3_TAMANHO" ) )
EndIF

Return( cRdjDscITOInit )


/*
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjTpCursVld	 ЁAutorЁMauricio MR       Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁValid para o Campo RDJ_TPCURS           					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID do campo RDJ_TPCURS								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjTpCursVld()
Local cRdjTpCurs	:= &( ReadVar() )
Local lRdjTpCursOK	:= .T.

Begin Sequence

	IF !( lRdjTpCursOK := NaoVazio() )
		Break
	EndIF

	IF !( lRdjTpCursOK := ExistCpo( "SQX" ) )
		Break
	EndIF
	
End Sequence	

Return( lRdjTpCursOK )


/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjTpCursInit	 ЁAutorЁMauricio MR       Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo Rdj_TPCURS					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_TPCURS								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjTpCursInit( cRdjCodObj, cRdjItObj , lGdFieldPut )  

Local cRdjTpcursInit:= ""
Local lGetDados		:= .F.

DEFAULT lGdFieldPut := .F.

lGetDados := IsInGetDados( { "RDJ_TPCURS" , "RDJ_CODOBJ", "RDJ_ITOBJ" } )

IF ( lGetDados )
	DEFAULT cRdjCodObj 	:= GdFieldGet( "RDJ_CODOBJ" )
	DEFAULT cRdjItObj 	:= GetMemVar( "RDJ_ITOBJ" )
	
	cRdjTpcursInit	:= fDesc( "RDW" , cRdjCodObj+cRdjItObj , "RDW_TPCURS" , NIL , NIL , NIL , .F. )
	cRdjTpcursInit	:= Padr( cRdjTpcursInit , GetSx3Cache( "RDW_TPCURS" , "X3_TAMANHO" ) )
	IF ( lGdFieldPut )
		GdFieldPut( "RDJ_TPCURS" , cRdjTpcursInit )
	EndIF	
	SetMemVar( "RDJ_TPCURS" , cRdjTpcursInit )
Else
	DEFAULT cRdjCodObj	:= RDJ->RDJ_CODOBJ
	DEFAULT cRdjItObj	:= RDJ->RDJ_ITOBJ   
	cRdjCodObj	:= IF(Empty(cRdjCodObj), RDV->RDV_CODOBJ, cRdjCodObj )
	cRdjItObj	:= IF(Empty(cRdjItObj) , fDesc( "RDW" , cRdjCodObj , "RDW_ITEM" , NIL , NIL , NIL , .F. ),;
	     			cRdjItObj )

	cRdjTpcursInit	:= fDesc( "RDW" , cRdjCodObj+cRdjItObj , "RDW_TPCURS" , NIL , NIL , NIL , .F. )
	cRdjTpcursInit	:= Padr( cRdjTpcursInit , GetSx3Cache( "RDW_TPCURS" , "X3_TAMANHO" ) )
EndIF

Return( cRdjTpcursInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDescTPInit	 ЁAutorЁMauricio MR       Ё Data Ё20/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RdJ_DESCTP					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DESCTP								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDescTpInit( cRdjTpCurs , lGdFieldPut )

Local cRdjDescTpInit	:= ""
Local cRdjCodObj
Local cRdjItObj	   
Local lGetDados		:= .F.

DEFAULT lGdFieldPut := .F.

lGetDados := IsInGetDados( { "RDJ_DESCTP" } )

IF ( lGetDados )
	DEFAULT cRdjTpCurs := GetMemVar( "RDJ_TPCURS" )
	
	cRdjDescTpInit	:= fDesc( "SQX" , cRdjTpCurs , "QX_DESC" , NIL , NIL , NIL , .F. )
	cRdjDescTpInit	:= Padr( cRdjDescTpInit , GetSx3Cache( "RDJ_DESCTP" , "X3_TAMANHO" ) )
	IF ( lGdFieldPut )
		GdFieldPut( "RDJ_DESCTP" , cRdjDescTpInit )
	EndIF	
	SetMemVar( "RDJ_DESCTP" , cRdjDescTpInit )
Else
    cRdjCodObj	:= RDJ->RDJ_CODOBJ
	cRdjItObj	:= RDJ->RDJ_ITOBJ   
	cRdjCodObj	:= IF(Empty(cRdjCodObj), RDV->RDV_CODOBJ, cRdjCodObj )
	cRdjItObj	:= IF(Empty(cRdjItObj) , fDesc( "RDW" , cRdjCodObj , "RDW_ITEM" , NIL , NIL , NIL , .F. ),;
	     			cRdjItObj )

	DEFAULT cRdjTpCurs	:= fDesc( "RDW" , cRdjCodObj+cRdjItObj , "RDW_TPCURS" , NIL , NIL , NIL , .F. )
	cRdjTpCurs	:= Padr( cRdjTpCurs , GetSx3Cache( "RDW_TPCURS" , "X3_TAMANHO" ) )


	cRdjDescTpInit	:= fDesc( "SQX" , cRdjTpCurs , "QX_DESC" , NIL , NIL , NIL , .F. )
	cRdjDescTpInit	:= Padr( cRdjDescTpInit , GetSx3Cache( "RDJ_DESCTP" , "X3_TAMANHO" ) ) 

EndIF

Return( cRdjDescTpInit )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdwSxbFilt       ЁAutorЁMauricio MR       Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁCondicao de Filtro		     								Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁRetorno da Consulta Padrao RDW no SXB						Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdwSxbFilt()
Local cFilt	:= ""  
Local cRdvCodObj

If IsInGetDados( { "RDV_CODOBJ" } ) 
    cRdvCodObj:= GdFieldGet( "RDV_CODOBJ" , oGdRdv:nAt , .F. , oGdRdv:aHeader , oGdRdv:aCols )
    cRdvCodObj:= Padr( cRdvCodObj , GetSx3Cache( "RDV_CODOBJ" , "X3_TAMANHO" ) )

	cFilt:= "RDW->RDW_CODOBJ == '"+ cRdvCodObj +"'"
Else 
    cFilt:= "RDW->RDW_CODOBJ == RDI->RDI_CODIGO"
Endif
Return( &cFilt )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁSqTSxbFilt       ЁAutorЁMauricio MR       Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁCondicao de Filtro		     								Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁRetorno da Consulta Padrao SQT no SXB						Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function SqtSxbFilt() 

Local cFilt	:= ""                                                               
Local cRdjTpCurs

If IsInGetDados( { "RDJ_TPCURS" } ) 
 	cRdjTpCurs:= GdFieldGet( "RDJ_TPCURS" , oGdRdj:nAt , .F. , oGdRdj:aHeader , oGdRdj:aCols )
    cRdjTpCurs:= Padr( cRdjTpCurs , GetSx3Cache( "RDJ_TPCURS" , "X3_TAMANHO" ) )
	cFilt:= "SQT->QT_TIPO == '"+ cRdjTpCurs +"'"
Else
    //-- Sem filtro
    cFilt:= "SQT->QT_TIPO == SQT->QT_TIPO"
Endif

Return( &cFilt )
                 

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjValorVld	 ЁAutorЁMauricio MR           Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Validar o Conteudo do Campo RDJ_VALOR 	        Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_VALOR			              	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjValorVld()

Local lRdjValorOk := .T.

Begin Sequence

	IF !( lRdjValorOk := Positivo() )
    	Break
    EndIF

End Sequence

Return( lRdjValorOk )


/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjCursoVld	 ЁAutorЁMauricio MR           Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Validar o Conteudo do Campo RDJ_CURSO 	        Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_CURSO	                    	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjCursoVld()

Local lRdjCursoOk := .T.

Begin Sequence
        
	IF !( lRdjCursoOk := ExistCpo( "SQT",(GetMemVar("RDJ_CURSO")+GdFieldGet("RDJ_TPCURS"))  ) )
    	Break
    EndIF
	RdjDsCursInit( GdFieldGet("RDJ_TPCURS"), GetMemVar("RDJ_CURSO") , .T. )
End Sequence

Return( lRdjCursoOk )     


/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDsCursInit	 ЁAutorЁMauricio MR       Ё Data Ё20/12/2004Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RdJ_DSCURS					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RdJ_DSCURS								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDsCursInit( cRdjTpCurs, cRdjCurso , lGdFieldPut )

Local cRdjDsCursInit	:= ""   

Local lGetDados		:= .F.

DEFAULT lGdFieldPut := .F.

lGetDados := IsInGetDados( { "RDJ_DSCURS" } )

IF ( lGetDados )
	DEFAULT cRdjTpCurs := GdFieldGet( "RDJ_TPCURS" )
	DEFAULT cRdjCurso  := GetMemVar( "RDJ_CURSO" )

	cRdjDsCursInit	:= fDesc( "SQT" , cRdjCurso+cRdjTpCurs , "QT_DESCRIC" , NIL , NIL , NIL , .F. )
	cRdjDsCursInit	:= Padr( cRdjDsCursInit , GetSx3Cache( "RDJ_DSCURS" , "X3_TAMANHO" ) )
	IF ( lGdFieldPut )
		GdFieldPut( "RDJ_DSCURS" , cRdjDsCursInit )
	EndIF	
	SetMemVar( "RDJ_DESCTP" , cRdjDsCursInit )
Else
    DEFAULT cRdjTpCurs := RDJ->RDJ_TPCURS
	DEFAULT cRdjCurso  := RDJ->RDJ_CURSO   
	
	cRdjDsCursInit	:= fDesc( "SQT" , cRdjCurso+cRdjTpCurs , "QT_DESCRIC" , NIL , NIL , NIL , .F. )
	cRdjDsCursInit	:= Padr( cRdjDsCursInit , GetSx3Cache( "RDJ_DSCURS" , "X3_TAMANHO" ) )

EndIF

Return( cRdjDsCursInit )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDuracaVld ЁAutorЁMauricio MR           Ё Data Ё17/12/2004Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Validar o Conteudo do Campo RDJ_DURACA 	        Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_DURACA	                  	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDuracaVld()

Local lRdjDuracaOk := .T.

Begin Sequence

	IF !( lRdjDuracaOk := Positivo() )
    	Break
    EndIF

End Sequence

Return( lRdjDuracaOk )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjVerItmVld ЁAutorЁEmerson Grassi Rocha  Ё Data Ё01/04/2005Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Validar o Conteudo do Campo RDJ_VERITM 	        Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDJ_VERITM	                  	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjVerItmVld()

Local lRdjVerItmOk := .T.

Begin Sequence

	IF !( lRdjVerItmOk := Positivo() )
    	Break
    EndIF

End Sequence

Return( lRdjVerItmOk )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdvVerAtuVld ЁAutorЁEmerson Grassi Rocha  Ё Data Ё01/04/2005Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao para Validar o Conteudo do Campo RDV_VERATU 	        Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_VALID para o campo RDV_VERATU	                  	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdvVerAtuVld()

Local lRdvVerAtuOk := .T.

Begin Sequence

	IF !( lRdvVerAtuOk := Positivo() )
    	Break
    EndIF

End Sequence

Return( lRdvVerAtuOk )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDEscReInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DESCRE					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DESCRE								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDEscReInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCREA" , "RDJ_DESCRE" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao da Escala de Relevancia				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBK" , GdFieldGet( "RDJ_ESCREA" ) , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCRE" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DESCRE" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBK" , RDJ->RDJ_ESCREA , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCRE" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDItEsRInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DITESR					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DITESR								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDItEsRInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCREA", "RDJ_ITESCR" , "RDJ_DITESR" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Item da Escala de Relevancia		   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBL" , GetMemVar( "RDJ_ESCREA" ) + GetMemVar( "RDJ_ITESCR" ) , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITESR" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DITESR" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBL" , RDJ->RDJ_ESCREA + RDJ->RDJ_ITESCR , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITESR" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )   

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDEscAtInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DESCAT					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DESCRE								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDEscAtInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCATG" , "RDJ_DESCAT" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao da Escala de Atingimento				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBK" , GdFieldGet( "RDJ_ESCATG" ) , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCAT" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DESCAT" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBK" , RDJ->RDJ_ESCATG , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCAT" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )


/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDItEsAInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DITESA					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DITESA								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDItEsAInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCATG", "RDJ_ITESAT" , "RDJ_DITESA" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Item da Escala de Relevancia		   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBL" , GetMemVar( "RDJ_ESCATG" ) + GetMemVar( "RDJ_ITESAT" ) , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITESA" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DITESA" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBL" , RDJ->RDJ_ESCATG + RDJ->RDJ_ITESAT , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITESA" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDEscCoInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DESCCO					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DESCCO								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDEscCoInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCCON" , "RDJ_DESCCO" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao da Escala de Conhecimento				   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBK" , GdFieldGet( "RDJ_ESCCON" ) , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCCO" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DESCCO" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBK" , RDJ->RDJ_ESCCON , "RBK_DESCRI" , GetSx3Cache( "RDJ_DESCCO" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDItConInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DITCON					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DITCON								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDItConInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCCON", "RDJ_ITATCN" , "RDJ_DITCON" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Item da Escala de Conhecimento		   Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBL" , GdFieldGet( "RDJ_ESCCON" ) + GetMemVar( "RDJ_ITATCN" ) , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITCON" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DITCON" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBL" , RDJ->RDJ_ESCCON + RDJ->RDJ_ITATCN , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITCON" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDItCoAInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DITCOA					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DITCOA								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDItCoAInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCCON", "RDJ_ITECOA" , "RDJ_DITCOA" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Item da Escala de Conhecimento Atual  Ё
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBL" , GetMemVar( "RDJ_ESCCON" ) + GetMemVar( "RDJ_ITECOA" ) , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITCOA" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DITCOA" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBL" , RDJ->RDJ_ESCCON + RDJ->RDJ_ITECOA , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITCOA" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддддддбдддддбддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁRdjDItCoPInit	 ЁAutorЁEmerson Grassi    Ё Data Ё13/12/2005Ё
цддддддддддедддддддддддддддддадддддаддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁInicializadora Padrao do Campo RDJ_DITCOP					Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁX3_RELACAO do campo RDJ_DITCOP								Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function RdjDItCoPInit()

Local lGetDados	:= IsInGetDados( { "RDJ_ESCCON", "RDJ_ITECOP" , "RDJ_DITCOP" } )

Local cDesc

IF ( lGetDados )
	/*/
	здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
	Ё Carrega a Descricao do Item da Escala de Conhecim. PretendidoЁ
	юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
	cDesc	:= fDesc( "RBL" , GetMemVar( "RDJ_ESCCON" ) + GetMemVar( "RDJ_ITECOP" ) , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITCOP" , "X3_TAMANHO" ) , NIL , NIL , .F. )
	IF !( InAddLine( "APDA100/__EXECUTE/RUNAPP/SIGAAPD/" ) )
		GdFieldPut( "RDJ_DITCOP" , cDesc )
	EndIF	
Else
	cDesc	:= fDesc( "RBL" , RDJ->RDJ_ESCCON + RDJ->RDJ_ITECOP , "RBL_DESCRI" , GetSx3Cache( "RDJ_DITCOP" , "X3_TAMANHO" ) , NIL , NIL , .F. )
EndIF

Return( cDesc )

/*/
зддддддддддбдддддддддддддбдддддбддддддддддддддддддддддбддддддбдддддддддд©
ЁFun┤┘o    ЁApda100Leg() ЁAutorЁEmerson Grassi Rocha  Ё Data Ё15/12/2005Ё
цддддддддддедддддддддддддадддддаддддддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤┘o ЁFuncao coluna de legenda                                    Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ<Vide Parametros Formais>									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100								                  	   	Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды/*/
Function Apda100Leg(cStatus, aGdObjects , nActFolder , aPages , aObjFolder, nChamada)

Local aCollor	:= {}  
Local aCollor1	:= {}  
Local aCollor2	:= {}  
Local aSvKeys 	:= GetKeys()
Local cCor		:= "BR_BRANCO"  
Local cMsgInfo	:= ""
Local nPosGdObj	:= 0          
Local nx		:= 0
                        
DEFAULT aGdObjects 	:= {}

cStatus := If(Empty(cStatus), "1", cStatus)
Begin Sequence

	IF (;
			cStatus == "#" .And.;
			(;
				Empty( aGdObjects );
				.or.;
				( ( nPosGdObj := aScan( aGdObjects[ nActFolder ] , .T. ) ) == 0 );
			);
		)	
		cMsgInfo := STR0022	//"OpГЦo disponМvel apenas para pesquisa na(s) Pasta(s):"
		cMsgInfo += CRLF
		cMsgInfo += aPages[ 02 ]
		MsgInfo( OemToAnsi( cMsgInfo ) , cCadastro )
		Break
	EndIF
	
	//RDV
	aadd(aCollor1,{"BR_AMARELO"		, STR0041})	//"Avaliado"                  
	aadd(aCollor1,{"BR_AZUL"		, STR0042})	//"Avaliador"                 
	aadd(aCollor1,{"BR_VERMELHO" 	, STR0043})	//"Finalizado"                
	     
	//RDJ
	aadd(aCollor2,{"BR_BRANCO" 	, STR0018})	//"Proposto"                  
	aadd(aCollor2,{"BR_VERDE" 	, STR0019})	//"Aprovado"                  
	aadd(aCollor2,{"BR_LARANJA"	, STR0020})	//"Aprovado com Pendencia"    
	aadd(aCollor2,{"BR_PRETO" 	, STR0021})	//"Cancelado"                 
	aadd(aCollor2,{"BR_PINK" 	, STR0037})	//"Aprovado ( HistСrico )"    
	aadd(aCollor2,{"BR_CINZA" 	, STR0038})	//"Cancelado ( HistСrico )"	  
	
	For nx := 1 To Len( aCollor1 )
		Aadd(aCollor, aCollor1[nx])
	Next nx    
	
	For nx := 1 To Len( aCollor2 )
		Aadd(aCollor, aCollor2[nx])
	Next nx
                                         
	If !Empty(aGdObjects) .And. cStatus == "#"
		BrwLegenda	(STR0040,STR0039, aCollor) //"Status do Participantes x Objetivos"###"Legenda"
	Else
		If nChamada == 1
			cCor := aCollor1[Val(cStatus),1]	
		ElseIf nChamada == 2
			cCor := aCollor2[Val(cStatus),1]			
		EndIf
	EndIf

End Sequence

RestKeys( aSvKeys , .T. )
	
Return cCor


/*                                	
зддддддддддбддддддддддддддддбдддддбдддддддддддддддддддбддддддбдддддддддд©
ЁFun┤└o    Ё MenuDef		ЁAutorЁ  Luiz Gustavo     Ё Data Ё20/12/2006Ё
цддддддддддеддддддддддддддддадддддадддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁIsola opcoes de menu para que as opcoes da rotina possam    Ё
Ё          Ёser lidas pelas bibliotecas Framework da Versao 9.12 .      Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё< Vide Parametros Formais >									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
Ё Uso      ЁAPDA100                                                     Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
Ё Retorno  ЁaRotina														Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ< Vide Parametros Formais >									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/   

Static Function MenuDef()

 Local aRotina := {;
								{ STR0001 , "AxPesqui"	 , 0 , 01,,.F. } ,; //"Pesquisar"
								{ STR0002 , "Apda100Mnt" , 0 , 02 } ,; //"Visualizar"
								{ STR0003 , "Apda100Mnt" , 0 , 04 } ,; //"Incluir"
								{ STR0004 , "Apda100Mnt" , 0 , 04 } ,; //"Alterar"
								{ STR0005 , "Apda100Mnt" , 0 , 05 } ,; //"Excluir"
 								{ STR0044 , "Apda020Leg" , 0 , 05, ,.F.} ; //"Legenda"
												}							
Return aRotina

/*                                	
зддддддддддбддддддддддддддддбдддддбдддддддддддддддддддбддддддбдддддддддд©
ЁFun┤└o    Ё Apda100VldRec  ЁAutorЁ  Eduardo Ju       Ё Data Ё04/04/2007Ё
цддддддддддеддддддддддддддддадддддадддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁValidacao das informacoes do participante na mudanca entre  Ё
Ё          Ёos folders Participante/Obejtivos                           Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё< Vide Parametros Formais >									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100                                                     Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ< Vide Parametros Formais >									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
Static Function Apda100VldRec()   

If nRecno == 0
	nRecno := RD0->(RECNO())    
EndIf

If nRecno <> RD0->(RECNO())
	RD0->( DbGoTo(nRecno) )
EndIf

Return .T.
/*                                	
зддддддддддбддддддддддддддддбдддддбдддддддддддддддддддбддддддбдддддддддд©
ЁFun┤└o    Ё RDJAUTORBOX  ЁAutorЁ  Eduardo        Ё Data Ё22/10/2019Ё
цддддддддддеддддддддддддддддадддддадддддддддддддддддддаддддддадддддддддд╢
ЁDescri┤└o ЁFunГЦo que И utilizada para preenchimento de opГУes do		Ё
ЁDescri┤└o ЁRDJ que nЦo estava em TFS ou RPO, foi necessАrio recria-la  Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁSintaxe   Ё< Vide Parametros Formais >									Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁUso       ЁAPDA100                                                     Ё
цддддддддддедддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд╢
ЁParametrosЁ< Vide Parametros Formais >									Ё
юддддддддддадддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
Function RDJAUTORBOX()
Local cRet	:= ""
 
	cRet	:= STR0045                                                                                                       

Return cRet
