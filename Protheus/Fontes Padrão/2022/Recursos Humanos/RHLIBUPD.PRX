#include "Protheus.ch"

Static cEmpSR5 := "!#!#!"

/*                                                                                           
ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ
±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±
±±ÉÍÍÍÍÍÍÍÍÍÍÑÍÍÍÍÍÍÍÍÍÍÍÍËÍÍÍÍÍÍÍÑÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍËÍÍÍÍÍÍÑÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»±±
±±ºPrograma  ³ RHLIBUPD   ³Autor  ³Equipe RH			  ³ Data ³      09/11/2009 º±±
±±ÌÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹±±
±±ºDescri‡…o ³ Biblioteca de funcoes para atualizacao de dicionario				   º±±
±±ÌÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹±±
±±ºSintaxe   ³ RHLIBUPD()													       º±±
±±ÌÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹±±
±±ºUso       ³ Generico                                                            º±±
±±ÌÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹±±
±±º         ATUALIZACOES SOFRIDAS DESDE A CONSTRU€AO INICIAL.                      º±±
±±ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹±±
±±ºProgramador   ³ Data     ³ FNC       ³  Motivo da Alteracao                     º±±
±±ÇÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¶±±
±±ºMauricio MR   ³31/12/2010³029989/2010³Ajuste na complementacao da migracao de   º±±
±±º              ³          ³           |versao.								   º±±
±±ºLeandro Dr.   ³30/05/2012³     TETZL6³Ajuste na complementacao da migracao de   º±±
±±º              ³          ³           |versao.								   º±±
±±ºMauricio MR   ³28/06/2012³016042/2012³Ajuste na complementacao da migracao de   º±±
±±º              ³          ³TFFORN     |versao.								   º±±
±±ºCesar Bianchi ³13/07/2012³    TFJODH ³Tratamento para controle de DeadLock.     º±±
±±ºRenata        ³          ³           |										   º±±
±±º              ³          ³           |										   º±±
±±ºGustavo M.	 ³27/02/2015³    TRRPU7 ³Verificacao para existir conversao de baseº±±
±±º			     ³          ³           |										   º±±
±±ºChristiane V. ³02/07/2015³    TSMUY2 ³Retirada das funções de Load para inclusãoº±±
±±º              ³          ³           ³nos fontes de ajuste dos respectivos modulº±±
±±³Tiago Malta   ³24/08/2015³PCREQ-4824 ³Ajustes no controle de alterações         ³±±
±±³			     ³		    ³	   		³dicionarios para utilização na versão 12. ³±±
±±³		         ³		    ³	        ³Changeset 319822 Data 03/08/2015          ³±±
±±ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÏÍÍÍÍÍÍÍÍÍÍÏÍÍÍÍÍÍÍÍÍÍÍÏÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼±±
±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±
ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß*/

/*                                	
ÚÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄ¿
³Fun‡„o    ³ GPEUpdFConj    ³Autor³  Tatiane v. Matias³ Data ³30/07/2009³
ÃÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄ´
³Descri‡„o ³ Função chamada pela LIB no momento da alteração do tamanho ³
³          ³ do grupo de campos FILIAL. Retornará um array com os campos³
³          ³ que sofrerão alteração no tamanho, conforme informado no   ³
³          ³ grupo de campos. Estrutura do array de retorno:            ³
³          ³     aArray[n,1]=Alias                                      ³
³          ³     aArray[n,2]=Campo                                      ³
³          ³     aArray[n,3]=Tamanho original do campo (Deve ser        ³
³          ³                 informado o tamanho padrão e não deve ser  ³
³          ³                 considerado o aumento ou diminuição do     ³
³          ³                 campo filial)                              ³
³          ³     aArray[n,4]=Indica a posição em que inicia a gravação  ³
³          ³                 do campo filial (Opcional. No caso de não  ³
³          ³                 existir este nível, o campo será apenas    ³
³          ³                 aumentado.)                                ³
³          ³     aArray[n,5]=Bloco de códigos com a função de           ³
³          ³                 atualização dos dados a ser executada      ³
³          ³                 quando a posição 4 for igual a 0 (zero).   ³
³          ³                 Este bloco de códigos recebera como        ³
³          ³                 parâmetro as seguintes informações: cAlias,³
³          ³                 cField,nRealSize,nFilIni,nOldSize,nNewSize.³ 
ÀÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ*/   
Function GPEUpdFConj()

Local aFields  := {}

Return aFields 

/*                                	
ÚÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄ¿
³Fun‡„o    ³ AtuSR5SRX      ³Autor³Rogerio Ribeiro /Tatiane Matias ³Data  ³19/03/2010³
ÃÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄ´
³Descri‡„o ³ Função chamada pela LIB no momento da virada de versão para a M11       ³
³          ³ Esta função irá atualizar a tabela SRX.                                 ³
ÀÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ*/   
Function AtuSR5SRX()

Local cFil
Local cResto
Local cAliasSR5 := ""
Local nTamFil	:= 12

#IFDEF TOP	//mantido esse IFDEF pq clientes de frontloja que não utilizam RH não precisa executar essa função e da error.log na query pq usam somente codebase
	If cEmpSR5 == cEmpAnt
		Return
	Else
		cEmpSR5 := cEmpAnt
	EndIf 
	
	cAliasSR5 := GetNextAlias()
	BeginSql alias cAliasSR5
		SELECT R5_QUANTOS    
		FROM %table:SR5% SR5 
		WHERE R5_ARQUIVO='X06' AND R5_CAMPO='X06_EMPRE1' AND R5_FILIAL= %exp:xFilial("SR5")%
		AND SR5.%notDel% 
	EndSql	
	
	If !(cAliasSR5)->(Eof())
		nTamFil := (cAliasSR5)->R5_QUANTOS
	EndIf
	(cAliasSR5)->(dbCloseArea())
	
	DBSelectArea("SRX")
	DBSetOrder(1)
	DBGoTop()
    
	While !Eof()
		If RX_TIP $ "06/14/15/19/20/22/26/35/39/41/45/46/58"
			cFil:= Left(RX_COD, nTamFil)
			cResto:= SubStr(RX_COD, nTamFil + 1)
			
			Reclock( "SRX", .F.) 
			SRX->RX_COD := PadR(cFil, 12) + cResto
			MsUnlock()
		EndIf
		
		DBSkip()
	EndDo
#ENDIF

Return